{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js!/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/product/category/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/product/category/form.vue","mtime":1678063974000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/babel.config.js","mtime":1637306514000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2xpdXNoYW9odWEvUHJvamVjdC9zc3l4LXdlYi9zc3l4LWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCgppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL3Byb2R1Y3QvY2F0ZWdvcnknOwp2YXIgaXNOdW0gPSBmdW5jdGlvbiBpc051bShydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICB2YXIgYWdlID0gL15bMC05XSokLzsKICBpZiAoIWFnZS50ZXN0KHZhbHVlKSkgewogICAgY2FsbGJhY2sobmV3IEVycm9yKCflj6rog73kuLrmlbDlrZcnKSk7CiAgfSBlbHNlIHsKICAgIGNhbGxiYWNrKCk7CiAgfQp9Owp2YXIgZGVmYXVsdEZvcm0gPSB7CiAgaWQ6ICcnLAogIG5hbWU6ICcnLAogIHN0YXR1czogJycsCiAgc29ydDogJycKfTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYXRlZ29yeTogZGVmYXVsdEZvcm0sCiAgICAgIHNhdmVCdG5EaXNhYmxlZDogZmFsc2UsCiAgICAgIHZhbGlkYXRlUnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn5b+F6aG76L6T5YWlJwogICAgICAgIH1dLAogICAgICAgIHNvcnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIGRlY2ltYWw6IDIsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicsCiAgICAgICAgICBtZXNzYWdlOiAn5b+F6aG76L6T5YWlJwogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogaXNOdW0sCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCiAgLy8g55uR5ZCs5ZmoCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKHRvLCBmcm9tKSB7CiAgICAgIGNvbnNvbGUubG9nKCfot6/nlLHlj5jljJYuLi4uLi4nKTsKICAgICAgY29uc29sZS5sb2codG8pOwogICAgICBjb25zb2xlLmxvZyhmcm9tKTsKICAgICAgdGhpcy5pbml0KCk7CiAgICB9CiAgfSwKICAvLyDnlJ/lkb3lkajmnJ/mlrnms5XvvIjlnKjot6/nlLHliIfmjaLvvIznu4Tku7bkuI3lj5jnmoTmg4XlhrXkuIvkuI3kvJrooqvosIPnlKjvvIkKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2coJ2Zvcm0gY3JlYXRlZCAuLi4uLi4nKTsKICAgIHRoaXMuaW5pdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6KGo5Y2V5Yid5aeL5YyWCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KCkgewogICAgICAvLyBkZWJ1Z2dlcgogICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zICYmIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgICAgICB0aGlzLmZldGNoRGF0YUJ5SWQoaWQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOWvueixoeaLk+Wxlei/kOeul+espu+8muaLt+i0neWvueixoe+8jOiAjOS4jeaYr+i1i+WAvOWvueixoeeahOW8leeUqAogICAgICAgIHRoaXMuY2F0ZWdvcnkgPSBfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0Rm9ybSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlT3JVcGRhdGU6IGZ1bmN0aW9uIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmcy5jYXRlZ29yeUZvcm0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBfdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlOyAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgICAgIGlmICghX3RoaXMuY2F0ZWdvcnkuaWQpIHsKICAgICAgICAgICAgX3RoaXMuc2F2ZURhdGEoKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLnVwZGF0ZURhdGEoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOaWsOWingogICAgc2F2ZURhdGE6IGZ1bmN0aW9uIHNhdmVEYXRhKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgYXBpLnNhdmUodGhpcy5jYXRlZ29yeSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAvLyBkZWJ1Z2dlcgogICAgICAgIGlmIChyZXNwb25zZS5jb2RlKSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvcHJvZHVjdC9jYXRlZ29yeS9saXN0JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YTogZnVuY3Rpb24gdXBkYXRlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGFwaS51cGRhdGVCeUlkKHRoaXMuY2F0ZWdvcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgZGVidWdnZXI7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgICBfdGhpczMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy9wcm9kdWN0L2NhdGVnb3J5L2xpc3QnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGJhY2s6IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL3Byb2R1Y3QvY2F0ZWdvcnkvbGlzdCcKICAgICAgfSk7CiAgICB9LAogICAgLy8g5qC55o2uaWTmn6Xor6LorrDlvZUKICAgIGZldGNoRGF0YUJ5SWQ6IGZ1bmN0aW9uIGZldGNoRGF0YUJ5SWQoaWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIGFwaS5nZXRCeUlkKGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgX3RoaXM0LmNhdGVnb3J5ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["api","isNum","rule","value","callback","age","test","Error","defaultForm","id","name","status","sort","data","category","saveBtnDisabled","validateRules","required","trigger","message","decimal","validator","watch","$route","to","from","console","log","init","created","methods","params","fetchDataById","_objectSpread","saveOrUpdate","_this","$refs","categoryForm","validate","valid","saveData","updateData","_this2","save","then","response","code","$message","type","$router","push","path","_this3","updateById","back","_this4","getById"],"sources":["src/views/product/category/form.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"categoryForm\" :model=\"category\" :rules=\"validateRules\" label-width=\"120px\">\n\n      <el-form-item label=\"分类名称\" prop=\"name\">\n        <el-input v-model=\"category.name\"/>\n      </el-form-item>\n      <el-form-item label=\"排序\" prop=\"sort\">\n        <el-input v-model=\"category.sort\"/>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"saveOrUpdate\">保存</el-button>\n        <el-button @click=\"back\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n\nimport api from '@/api/product/category'\n\nconst isNum = (rule, value, callback) => {\n  const age= /^[0-9]*$/\n  if (!age.test(value)) {\n    callback(new Error('只能为数字'))\n  }else{\n    callback()\n  }\n}\n\nconst defaultForm = {\n  id: '',\n  name: '',\n  status: '',\n  sort: ''\n}\n\nexport default {\n  data() {\n    return {\n      category: defaultForm,\n      saveBtnDisabled: false,\n\n      validateRules: {\n        name: [{ required: true, trigger: 'blur', message: '必须输入' }],\n        sort: [\n          { required: true, decimal:2, trigger: 'blur', message: '必须输入' },\n          { validator: isNum, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    }\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n\n    // 表单初始化\n    init() {\n      // debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.category = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.$refs.categoryForm.validate(valid => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.category.id) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.category).then(response => {\n        // debugger\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/product/category/list' })\n        }\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.category).then(response => {\n        debugger\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/product/category/list' })\n        }\n      })\n    },\n\n    back() {\n      this.$router.push({ path: '/product/category/list' })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        // debugger\n        this.category = response.data\n      })\n    }\n  }\n}\n</script>\n"],"mappings":"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"}]}