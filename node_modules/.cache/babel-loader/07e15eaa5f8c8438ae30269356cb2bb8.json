{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js!/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/activity/couponInfo/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/activity/couponInfo/form.vue","mtime":1678063974000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/babel.config.js","mtime":1637306514000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL2xpdXNoYW9odWEvUHJvamVjdC9zc3l4LXdlYi9zc3l4LWFkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvYWN0aXZpdHkvY291cG9uSW5mbyc7CnZhciBkZWZhdWx0Rm9ybSA9IHsKICBpZDogJycsCiAgY291cG9uVHlwZTogJ0NBU0gnLAogIGNvdXBvbk5hbWU6ICcnLAogIGFtb3VudDogJzAnLAogIGNvbmRpdGlvbkFtb3VudDogJzAnLAogIHN0YXJ0VGltZTogJycsCiAgZW5kVGltZTogJycsCiAgcmFuZ2VUeXBlOiAnQUxMJywKICByYW5nZURlc2M6ICcnLAogIHB1Ymxpc2hDb3VudDogJycsCiAgcGVyTGltaXQ6ICcxJywKICB1c2VDb3VudDogJzAnLAogIHJlY2VpdmVDb3VudDogJycsCiAgZXhwaXJlVGltZTogJycsCiAgcHVibGlzaFN0YXR1czogJycKfTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb3Vwb25JbmZvOiBkZWZhdWx0Rm9ybSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKICAgICAga2V5d29yZDogJycsCiAgICAgIHNrdUluZm9MaXN0OiBbXQogICAgfTsKICB9LAogIC8vIOebkeWQrOWZqAogIHdhdGNoOiB7CiAgICAkcm91dGU6IGZ1bmN0aW9uICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBjb25zb2xlLmxvZygn6Lev55Sx5Y+Y5YyWLi4uLi4uJyk7CiAgICAgIGNvbnNvbGUubG9nKHRvKTsKICAgICAgY29uc29sZS5sb2coZnJvbSk7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfQogIH0sCiAgLy8g55Sf5ZG95ZGo5pyf5pa55rOV77yI5Zyo6Lev55Sx5YiH5o2i77yM57uE5Lu25LiN5Y+Y55qE5oOF5Ya15LiL5LiN5Lya6KKr6LCD55So77yJCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdmb3JtIGNyZWF0ZWQgLi4uLi4uJyk7CiAgICB0aGlzLmluaXQoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOihqOWNleWIneWni+WMlgogICAgaW5pdDogZnVuY3Rpb24gaW5pdCgpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CiAgICAgICAgdGhpcy5mZXRjaERhdGFCeUlkKGlkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlr7nosaHmi5PlsZXov5DnrpfnrKbvvJrmi7fotJ3lr7nosaHvvIzogIzkuI3mmK/otYvlgLzlr7nosaHnmoTlvJXnlKgKICAgICAgICB0aGlzLmNvdXBvbkluZm8gPSBfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0Rm9ybSk7CiAgICAgIH0KICAgIH0sCiAgICBzYXZlT3JVcGRhdGU6IGZ1bmN0aW9uIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlOyAvLyDpmLLmraLooajljZXph43lpI3mj5DkuqQKICAgICAgaWYgKCF0aGlzLmNvdXBvbkluZm8uaWQpIHsKICAgICAgICB0aGlzLnNhdmVEYXRhKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGRhdGVEYXRhKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmlrDlop4KICAgIHNhdmVEYXRhOiBmdW5jdGlvbiBzYXZlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgYXBpLnNhdmUodGhpcy5jb3Vwb25JbmZvKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIF90aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcvYWN0aXZpdHkvY291cG9uSW5mby9saXN0JwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YTogZnVuY3Rpb24gdXBkYXRlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGFwaS51cGRhdGVCeUlkKHRoaXMuY291cG9uSW5mbykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzMi4kcm91dGVyLnB1c2goewogICAgICAgICAgICBwYXRoOiAnL2FjdGl2aXR5L2NvdXBvbkluZm8vbGlzdCcKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYmFjazogZnVuY3Rpb24gYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvYWN0aXZpdHkvY291cG9uSW5mby9saXN0JwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmoLnmja5pZOafpeivouiusOW9lQogICAgZmV0Y2hEYXRhQnlJZDogZnVuY3Rpb24gZmV0Y2hEYXRhQnlJZChpZCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgYXBpLmdldEJ5SWQoaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgLy8gZGVidWdnZXIKICAgICAgICBfdGhpczMuY291cG9uSW5mbyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["api","defaultForm","id","couponType","couponName","amount","conditionAmount","startTime","endTime","rangeType","rangeDesc","publishCount","perLimit","useCount","receiveCount","expireTime","publishStatus","data","couponInfo","saveBtnDisabled","keyword","skuInfoList","watch","$route","to","from","console","log","init","created","methods","params","fetchDataById","_objectSpread","saveOrUpdate","saveData","updateData","_this","save","then","response","code","$message","type","message","$router","push","path","_this2","updateById","back","_this3","getById"],"sources":["src/views/activity/couponInfo/form.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n\n      <el-form-item label=\"优惠券名称\">\n        <el-input v-model=\"couponInfo.couponName\"/>\n      </el-form-item>\n      <el-form-item label=\"优惠券类型\">\n        <el-radio-group v-model=\"couponInfo.couponType\">\n          <el-radio label=\"CASH\">现金券</el-radio>\n          <el-radio label=\"FULL_REDUCTION\">满减券</el-radio>\n        </el-radio-group>\n      </el-form-item>\n\n      <el-form-item label=\"发行数量\">\n        <el-input v-model=\"couponInfo.publishCount\"/>\n      </el-form-item>\n      <el-form-item label=\"领取时间\">\n        <el-date-picker\n          v-model=\"couponInfo.startTime\"\n          type=\"date\"\n          placeholder=\"选择开始日期\"\n          value-format=\"yyyy-MM-dd\" />\n        至\n        <el-date-picker\n          v-model=\"couponInfo.endTime\"\n          type=\"date\"\n          placeholder=\"选择开始日期\"\n          value-format=\"yyyy-MM-dd\" />\n      </el-form-item>\n      <el-form-item label=\"过期时间\">\n        <el-date-picker\n          v-model=\"couponInfo.expireTime\"\n          type=\"datetime\"\n          placeholder=\"选择开始日期\"\n          value-format=\"yyyy-MM-dd HH:mm:ss\" />\n      </el-form-item>\n\n      <el-form-item>\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"saveOrUpdate\">保存</el-button>\n        <el-button @click=\"back\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n\nimport api from '@/api/activity/couponInfo'\n\nconst defaultForm = {\n  id: '',\n  couponType: 'CASH',\n  couponName: '',\n  amount: '0',\n  conditionAmount: '0',\n  startTime: '',\n  endTime: '',\n  rangeType: 'ALL',\n  rangeDesc: '',\n  publishCount: '',\n  perLimit: '1',\n  useCount: '0',\n  receiveCount: '',\n  expireTime: '',\n  publishStatus: ''\n}\n\nexport default {\n  data() {\n    return {\n      couponInfo: defaultForm,\n      saveBtnDisabled: false,\n\n      keyword: '',\n      skuInfoList: []\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    }\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n\n    // 表单初始化\n    init() {\n      // debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.couponInfo = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.saveBtnDisabled = true // 防止表单重复提交\n      if (!this.couponInfo.id) {\n        this.saveData()\n      } else {\n        this.updateData()\n      }\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.couponInfo).then(response => {\n        // debugger\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/activity/couponInfo/list' })\n        }\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.couponInfo).then(response => {\n        debugger\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/activity/couponInfo/list' })\n        }\n      })\n    },\n\n    back() {\n      this.$router.push({ path: '/activity/couponInfo/list' })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        // debugger\n        this.couponInfo = response.data\n      })\n    }\n  }\n}\n</script>\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA,OAAAA,GAAA;AAEA,IAAAC,WAAA;EACAC,EAAA;EACAC,UAAA;EACAC,UAAA;EACAC,MAAA;EACAC,eAAA;EACAC,SAAA;EACAC,OAAA;EACAC,SAAA;EACAC,SAAA;EACAC,YAAA;EACAC,QAAA;EACAC,QAAA;EACAC,YAAA;EACAC,UAAA;EACAC,aAAA;AACA;AAEA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA,EAAAjB,WAAA;MACAkB,eAAA;MAEAC,OAAA;MACAC,WAAA;IACA;EACA;EAEA;EACAC,KAAA;IACAC,MAAA,WAAAA,OAAAC,EAAA,EAAAC,IAAA;MACAC,OAAA,CAAAC,GAAA;MACAD,OAAA,CAAAC,GAAA,CAAAH,EAAA;MACAE,OAAA,CAAAC,GAAA,CAAAF,IAAA;MACA,KAAAG,IAAA;IACA;EACA;EAEA;EACAC,OAAA,WAAAA,QAAA;IACAH,OAAA,CAAAC,GAAA;IACA,KAAAC,IAAA;EACA;EAEAE,OAAA;IAEA;IACAF,IAAA,WAAAA,KAAA;MACA;MACA,SAAAL,MAAA,CAAAQ,MAAA,SAAAR,MAAA,CAAAQ,MAAA,CAAA7B,EAAA;QACA,IAAAA,EAAA,QAAAqB,MAAA,CAAAQ,MAAA,CAAA7B,EAAA;QACA,KAAA8B,aAAA,CAAA9B,EAAA;MACA;QACA;QACA,KAAAgB,UAAA,GAAAe,aAAA,KAAAhC,WAAA;MACA;IACA;IAEAiC,YAAA,WAAAA,aAAA;MACA,KAAAf,eAAA;MACA,UAAAD,UAAA,CAAAhB,EAAA;QACA,KAAAiC,QAAA;MACA;QACA,KAAAC,UAAA;MACA;IACA;IAEA;IACAD,QAAA,WAAAA,SAAA;MAAA,IAAAE,KAAA;MACArC,GAAA,CAAAsC,IAAA,MAAApB,UAAA,EAAAqB,IAAA,WAAAC,QAAA;QACA;QACA,IAAAA,QAAA,CAAAC,IAAA;UACAJ,KAAA,CAAAK,QAAA;YACAC,IAAA;YACAC,OAAA,EAAAJ,QAAA,CAAAI;UACA;UACAP,KAAA,CAAAQ,OAAA,CAAAC,IAAA;YAAAC,IAAA;UAAA;QACA;MACA;IACA;IAEA;IACAX,UAAA,WAAAA,WAAA;MAAA,IAAAY,MAAA;MACAhD,GAAA,CAAAiD,UAAA,MAAA/B,UAAA,EAAAqB,IAAA,WAAAC,QAAA;QACA;QACA,IAAAA,QAAA,CAAAC,IAAA;UACAO,MAAA,CAAAN,QAAA;YACAC,IAAA;YACAC,OAAA,EAAAJ,QAAA,CAAAI;UACA;UACAI,MAAA,CAAAH,OAAA,CAAAC,IAAA;YAAAC,IAAA;UAAA;QACA;MACA;IACA;IAEAG,IAAA,WAAAA,KAAA;MACA,KAAAL,OAAA,CAAAC,IAAA;QAAAC,IAAA;MAAA;IACA;IAEA;IACAf,aAAA,WAAAA,cAAA9B,EAAA;MAAA,IAAAiD,MAAA;MACAnD,GAAA,CAAAoD,OAAA,CAAAlD,EAAA,EAAAqC,IAAA,WAAAC,QAAA;QACA;QACAW,MAAA,CAAAjC,UAAA,GAAAsB,QAAA,CAAAvB,IAAA;MACA;IACA;EACA;AACA"}]}