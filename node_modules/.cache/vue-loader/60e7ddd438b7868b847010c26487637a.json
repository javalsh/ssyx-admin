{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/acl/permission/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/acl/permission/list.vue","mtime":1678524760000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvYWNsL3Blcm1pc3Npb24nCmNvbnN0IGRlZmF1bHRGb3JtID0gewogIGlkOiAnJywKICBwYXJlbnRJZDogJycsCiAgbmFtZTogJycsCiAgdHlwZTogMCwKICBwYXRoOiAnJywKICBjb21wb25lbnQ6ICcnLAogIHBlcm1zOiAnJywKICBpY29uOiAnJywKICBzb3J0VmFsdWU6IDEsCiAgc3RhdHVzOiAxCn0KZXhwb3J0IGRlZmF1bHQgewogIC8vIOWumuS5ieaVsOaNrgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzeXNNZW51TGlzdDogW10sCiAgICAgIGV4cGFuZEtleXM6IFtdLCAvLyDpnIDopoHoh6rliqjlsZXlvIDnmoTpobkKCiAgICAgIHR5cGVEaXNhYmxlZDogZmFsc2UsCiAgICAgIHR5cGUwRGlzYWJsZWQ6IGZhbHNlLAogICAgICB0eXBlMURpc2FibGVkOiBmYWxzZSwKICAgICAgdHlwZTJEaXNhYmxlZDogZmFsc2UsCiAgICAgIGRpYWxvZ1RpdGxlOiAnJywKCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzeXNNZW51OiBkZWZhdWx0Rm9ybSwKICAgICAgc2F2ZUJ0bkRpc2FibGVkOiBmYWxzZSwKCiAgICAgIGljb25MaXN0OiBbCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXMtdG9vbHMiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXMtY3VzdG9tIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zZXR0aW5nIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi11c2VyLXNvbGlkIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zLWhlbHAiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXBob25lIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1zLXVuZm9sZCIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tcy1vcGVyYXRpb24iLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLW1vcmUtb3V0bGluZSIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tcy1jaGVjayIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tdGlja2V0cyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tcy1nb29kcyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBjbGFzczogImVsLWljb24tZG9jdW1lbnQtcmVtb3ZlIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi13YXJuaW5nIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi13YXJuaW5nLW91dGxpbmUiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgY2xhc3M6ICJlbC1pY29uLXF1ZXN0aW9uIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGNsYXNzOiAiZWwtaWNvbi1pbmZvIiwKICAgICAgICB9CiAgICAgIF0KICAgIH0KICB9LAoKICAvLyDlvZPpobXpnaLliqDovb3ml7bojrflj5bmlbDmja4KICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOiwg+eUqGFwaeWxguiOt+WPluaVsOaNruW6k+S4reeahOaVsOaNrgogICAgZmV0Y2hEYXRhKCkgewogICAgICBjb25zb2xlLmxvZygn5Yqg6L295YiX6KGoJykKICAgICAgYXBpLmdldFBlcm1pc3Npb25MaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5zeXNNZW51TGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnN5c01lbnVMaXN0KQogICAgICB9KQogICAgfSwKCiAgICAvLyDmoLnmja5pZOWIoOmZpOaVsOaNrgogICAgcmVtb3ZlRGF0YUJ5SWQoaWQpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l6K6w5b2VLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4geyAvLyBwcm9taXNlCiAgICAgICAgLy8g54K55Ye756Gu5a6a77yM6L+c56iL6LCD55SoYWpheAogICAgICAgIHJldHVybiBhcGkucmVtb3ZlUGVybWlzc2lvbihpZCkKICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKICAgIH0sCgogICAgLy8gLS0tLS0tLS0tLS0tLQogICAgYWRkKHJvdyl7CiAgICAgIGRlYnVnZ2VyCiAgICAgIHRoaXMudHlwZURpc2FibGVkID0gZmFsc2UKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfmt7vliqDkuIvnuqfoioLngrknCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKCiAgICAgIHRoaXMuc3lzTWVudSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRGb3JtKQogICAgICB0aGlzLnN5c01lbnUuaWQgPSAnJwogICAgICBpZihyb3cpIHsKICAgICAgICB0aGlzLnN5c01lbnUucGFyZW50SWQgPSByb3cuaWQKICAgICAgICB0aGlzLnN5c01lbnUucGFyZW50TmFtZSA9IHJvdy5uYW1lCiAgICAgICAgLy90aGlzLnN5c01lbnUuY29tcG9uZW50ID0gJ1BhcmVudFZpZXcnCiAgICAgICAgaWYocm93LnR5cGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuc3lzTWVudS50eXBlID0gMQogICAgICAgICAgdGhpcy50eXBlRGlzYWJsZWQgPSBmYWxzZQogICAgICAgICAgdGhpcy50eXBlMERpc2FibGVkID0gZmFsc2UKICAgICAgICAgIHRoaXMudHlwZTFEaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICB0aGlzLnR5cGUyRGlzYWJsZWQgPSB0cnVlCiAgICAgICAgfSBlbHNlIGlmKHJvdy50eXBlID09PSAxKSB7CiAgICAgICAgICB0aGlzLnN5c01lbnUudHlwZSA9IDIKICAgICAgICAgIHRoaXMudHlwZURpc2FibGVkID0gdHJ1ZQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+a3u+WKoOebruW9leiKgueCuScKICAgICAgICB0aGlzLnN5c01lbnUudHlwZSA9IDAKICAgICAgICB0aGlzLnN5c01lbnUuY29tcG9uZW50ID0gJ0xheW91dCcKICAgICAgICB0aGlzLnN5c01lbnUucGFyZW50SWQgPSAwCiAgICAgICAgdGhpcy50eXBlRGlzYWJsZWQgPSB0cnVlCiAgICAgIH0KICAgIH0sCgogICAgZWRpdChyb3cpIHsKICAgICAgZGVidWdnZXIKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfkv67mlLnoioLngrknCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKCiAgICAgIHRoaXMuc3lzTWVudSA9IE9iamVjdC5hc3NpZ24oe30sIHJvdykKICAgICAgdGhpcy50eXBlRGlzYWJsZWQgPSB0cnVlCiAgICB9LAoKICAgIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgaWYodGhpcy5zeXNNZW51LnR5cGUgPT09IDAgJiYgdGhpcy5zeXNNZW51LnBhcmVudElkICE9PSAwKSB7CiAgICAgICAgdGhpcy5zeXNNZW51LmNvbXBvbmVudCA9ICdQYXJlbnRWaWV3JwogICAgICB9CiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlIC8vIOmYsuatouihqOWNlemHjeWkjeaPkOS6pAogICAgICAgICAgaWYgKCF0aGlzLnN5c01lbnUuaWQpIHsKICAgICAgICAgICAgdGhpcy5zYXZlRGF0YSgpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGEoKQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgLy8g5paw5aKeCiAgICBzYXZlRGF0YSgpIHsKICAgICAgYXBpLmFkZFBlcm1pc3Npb24odGhpcy5zeXNNZW51KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzcG9uc2UubWVzc2FnZSB8fCAn5pON5L2c5oiQ5YqfJykKICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQogICAgICAgIHRoaXMuZmV0Y2hEYXRhKHRoaXMucGFnZSkKICAgICAgfSkKICAgIH0sCgogICAgLy8g5qC55o2uaWTmm7TmlrDorrDlvZUKICAgIHVwZGF0ZURhdGEoKSB7CiAgICAgIGFwaS51cGRhdGVQZXJtaXNzaW9uKHRoaXMuc3lzTWVudSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+aTjeS9nOaIkOWKnycpCiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/acl/permission","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <!-- 工具条 -->\n    <div class=\"tools-div\">\n      <el-button type=\"success\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add()\">添 加</el-button>\n    </div>\n    <el-table\n      :data=\"sysMenuList\"\n      style=\"width: 100%;margin-bottom: 20px;margin-top: 10px;\"\n      row-key=\"id\"\n      border\n      :default-expand-all=\"false\"\n      :tree-props=\"{children: 'children'}\">\n\n      <el-table-column prop=\"name\" label=\"菜单名称\" width=\"200\"/>\n      \n      <el-table-column prop=\"code\" label=\"权限标识\" width=\"180\"/>\n      \n      <el-table-column prop=\"createTime\" label=\"创建时间\" width=\"200\"/>\n      \n      <el-table-column prop=\"updateTime\" label=\"修改时间\" width=\"200\"/>\n      <el-table-column label=\"操作\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"success\" v-if=\"scope.row.type !== 2\" icon=\"el-icon-plus\" size=\"mini\" @click=\"add(scope.row)\" title=\"添加下级节点\"/>\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"edit(scope.row)\" title=\"修改\"/>\n          <el-button type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" @click=\"removeDataById(scope.row.id)\" title=\"删除\" :disabled=\"scope.row.children.length > 0\"/>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog :title=\"dialogTitle\" :visible.sync=\"dialogVisible\" width=\"40%\" >\n      <el-form ref=\"dataForm\" :model=\"sysMenu\" label-width=\"150px\" size=\"small\" style=\"padding-right: 40px;\">\n        <el-form-item label=\"上级部门\" v-if=\"sysMenu.id === ''\">\n          <el-input v-model=\"sysMenu.parentName\" disabled=\"true\"/>\n        </el-form-item>\n        <el-form-item label=\"菜单类型\" prop=\"type\">\n          <el-radio-group v-model=\"sysMenu.type\" :disabled=\"typeDisabled\">\n            <el-radio :label=\"0\" :disabled=\"type0Disabled\">目录</el-radio>\n            <el-radio :label=\"1\" :disabled=\"type1Disabled\">菜单</el-radio>\n            <el-radio :label=\"2\" :disabled=\"type2Disabled\">按钮</el-radio>\n          </el-radio-group>\n        </el-form-item>\n        <el-form-item label=\"菜单名称\" prop=\"name\">\n          <el-input v-model=\"sysMenu.name\"/>\n        </el-form-item>\n        \n        <el-form-item prop=\"to_code\" v-if=\"sysMenu.type !== 0\">\n              <span slot=\"label\">\n                <el-tooltip content=\"访问的组件路径，如：`system/user/index`，默认在`views`目录下\" placement=\"top\">\n                <i class=\"el-icon-question\"></i>\n                </el-tooltip>\n                组件路径\n              </span>\n          <el-input v-model=\"sysMenu.to_code\" placeholder=\"请输入组件路径\" />\n        </el-form-item>\n        <el-form-item v-if=\"sysMenu.type === 2\">\n          <el-input v-model=\"sysMenu.code\" placeholder=\"请输入权限标识\" maxlength=\"100\" />\n          <span slot=\"label\">\n                <el-tooltip content=\"控制器中定义的权限字符，如：@PreAuthorize(hasAuthority('bnt.sysRole.list'))\" placement=\"top\">\n                <i class=\"el-icon-question\"></i>\n                </el-tooltip>\n                权限字符\n              </span>\n        </el-form-item>\n        \n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\" size=\"small\" icon=\"el-icon-refresh-right\">取 消</el-button>\n        <el-button type=\"primary\" icon=\"el-icon-check\" @click=\"saveOrUpdate()\" size=\"small\">确 定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/acl/permission'\nconst defaultForm = {\n  id: '',\n  parentId: '',\n  name: '',\n  type: 0,\n  path: '',\n  component: '',\n  perms: '',\n  icon: '',\n  sortValue: 1,\n  status: 1\n}\nexport default {\n  // 定义数据\n  data() {\n    return {\n      sysMenuList: [],\n      expandKeys: [], // 需要自动展开的项\n\n      typeDisabled: false,\n      type0Disabled: false,\n      type1Disabled: false,\n      type2Disabled: false,\n      dialogTitle: '',\n\n      dialogVisible: false,\n      sysMenu: defaultForm,\n      saveBtnDisabled: false,\n\n      iconList: [\n        {\n          class: \"el-icon-s-tools\",\n        },\n        {\n          class: \"el-icon-s-custom\",\n        },\n        {\n          class: \"el-icon-setting\",\n        },\n        {\n          class: \"el-icon-user-solid\",\n        },\n        {\n          class: \"el-icon-s-help\",\n        },\n        {\n          class: \"el-icon-phone\",\n        },\n        {\n          class: \"el-icon-s-unfold\",\n        },\n        {\n          class: \"el-icon-s-operation\",\n        },\n        {\n          class: \"el-icon-more-outline\",\n        },\n        {\n          class: \"el-icon-s-check\",\n        },\n        {\n          class: \"el-icon-tickets\",\n        },\n        {\n          class: \"el-icon-s-goods\",\n        },\n        {\n          class: \"el-icon-document-remove\",\n        },\n        {\n          class: \"el-icon-warning\",\n        },\n        {\n          class: \"el-icon-warning-outline\",\n        },\n        {\n          class: \"el-icon-question\",\n        },\n        {\n          class: \"el-icon-info\",\n        }\n      ]\n    }\n  },\n\n  // 当页面加载时获取数据\n  created() {\n    this.fetchData()\n  },\n\n  methods: {\n    // 调用api层获取数据库中的数据\n    fetchData() {\n      console.log('加载列表')\n      api.getPermissionList().then(response => {\n        this.sysMenuList = response.data\n        console.log(this.sysMenuList)\n      })\n    },\n\n    // 根据id删除数据\n    removeDataById(id) {\n      // debugger\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => { // promise\n        // 点击确定，远程调用ajax\n        return api.removePermission(id)\n      }).then((response) => {\n        this.fetchData()\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        })\n      }).catch(() => {\n         this.$message.info('取消删除')\n      })\n    },\n\n    // -------------\n    add(row){\n      debugger\n      this.typeDisabled = false\n      this.dialogTitle = '添加下级节点'\n      this.dialogVisible = true\n\n      this.sysMenu = Object.assign({}, defaultForm)\n      this.sysMenu.id = ''\n      if(row) {\n        this.sysMenu.parentId = row.id\n        this.sysMenu.parentName = row.name\n        //this.sysMenu.component = 'ParentView'\n        if(row.type === 0) {\n          this.sysMenu.type = 1\n          this.typeDisabled = false\n          this.type0Disabled = false\n          this.type1Disabled = false\n          this.type2Disabled = true\n        } else if(row.type === 1) {\n          this.sysMenu.type = 2\n          this.typeDisabled = true\n        }\n      } else {\n        this.dialogTitle = '添加目录节点'\n        this.sysMenu.type = 0\n        this.sysMenu.component = 'Layout'\n        this.sysMenu.parentId = 0\n        this.typeDisabled = true\n      }\n    },\n\n    edit(row) {\n      debugger\n      this.dialogTitle = '修改节点'\n      this.dialogVisible = true\n\n      this.sysMenu = Object.assign({}, row)\n      this.typeDisabled = true\n    },\n\n    saveOrUpdate() {\n      if(this.sysMenu.type === 0 && this.sysMenu.parentId !== 0) {\n        this.sysMenu.component = 'ParentView'\n      }\n      this.$refs.dataForm.validate(valid => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.sysMenu.id) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增\n    saveData() {\n      api.addPermission(this.sysMenu).then(response => {\n        this.$message.success(response.message || '操作成功')\n        this.dialogVisible = false\n        this.fetchData(this.page)\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updatePermission(this.sysMenu).then(response => {\n        this.$message.success(response.message || '操作成功')\n        this.dialogVisible = false\n        this.fetchData()\n      })\n    }\n  }\n}\n</script>"]}]}