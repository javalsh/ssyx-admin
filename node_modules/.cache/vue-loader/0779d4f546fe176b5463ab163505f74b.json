{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/sys/regionWare/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/sys/regionWare/list.vue","mtime":1678689428000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvc3lzL3JlZ2lvbldhcmUnCmltcG9ydCB3YXJlQXBpIGZyb20gJ0AvYXBpL3N5cy93YXJlJwppbXBvcnQgcmVnaW9uQXBpIGZyb20gJ0AvYXBpL3N5cy9yZWdpb24nCmNvbnN0IGRlZmF1bHRGb3JtID0gewogIHJlZ2lvbklkOiAnJywKICByZWdpb25OYW1lOiAnJywKICB3YXJlSWQ6ICcnLAogIHdhcmVOYW1lOiAnJwp9CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdExvYWRpbmc6IHRydWUsIC8vIOaVsOaNruaYr+WQpuato+WcqOWKoOi9vQogICAgICBsaXN0OiBudWxsLCAvLyBiYW5uZXLliJfooagKICAgICAgdG90YWw6IDAsIC8vIOaVsOaNruW6k+S4reeahOaAu+iusOW9leaVsAogICAgICBwYWdlOiAxLCAvLyDpu5jorqTpobXnoIEKICAgICAgbGltaXQ6IDEwLCAvLyDmr4/pobXorrDlvZXmlbAKICAgICAgc2VhcmNoT2JqOiB7fSwgLy8g5p+l6K+i6KGo5Y2V5a+56LGhCgogICAgICBvcGVuRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHdhcmVMaXN0OiBbXSwKICAgICAgcmVnaW9uTGlzdDogW10sCiAgICAgIGtleXdvcmQ6ICcnLAogICAgICByZWdpb25XYXJlOiBkZWZhdWx0Rm9ybQogICAgfQogIH0sCgogIC8vIOeUn+WRveWRqOacn+WHveaVsO+8muWGheWtmOWHhuWkh+WujOavle+8jOmhtemdouWwmuacqua4suafkwogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnbGlzdCBjcmVhdGVkLi4uLi4uJykKICAgIHRoaXMuZmV0Y2hEYXRhKCkKICAgIHRoaXMuZmV0Y2hXYXJlTGlzdCgpCiAgfSwKCiAgLy8g55Sf5ZG95ZGo5pyf5Ye95pWw77ya5YaF5a2Y5YeG5aSH5a6M5q+V77yM6aG16Z2i5riy5p+T5oiQ5YqfCiAgbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdsaXN0IG1vdW50ZWQuLi4uLi4nKQogIH0sCgogIG1ldGhvZHM6IHsKCiAgICAvLyDlvZPpobXnoIHlj5HnlJ/mlLnlj5jnmoTml7blgJkKICAgIGNoYW5nZVNpemUoc2l6ZSkgewogICAgICBjb25zb2xlLmxvZyhzaXplKQogICAgICB0aGlzLmxpbWl0ID0gc2l6ZQogICAgICB0aGlzLmZldGNoRGF0YSgxKQogICAgfSwKCiAgICAvLyDliqDovb1iYW5uZXLliJfooajmlbDmja4KICAgIGZldGNoRGF0YShwYWdlID0gMSkgewogICAgICBjb25zb2xlLmxvZygn57+76aG144CC44CC44CCJyArIHBhZ2UpCiAgICAgIC8vIOW8guatpeiOt+WPlui/nOeoi+aVsOaNru+8iGFqYXjvvIkKICAgICAgdGhpcy5wYWdlID0gcGFnZQoKICAgICAgYXBpLmdldFBhZ2VMaXN0KHRoaXMucGFnZSwgdGhpcy5saW1pdCwgdGhpcy5zZWFyY2hPYmopLnRoZW4oCiAgICAgICAgcmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbAoKICAgICAgICAgIC8vIOaVsOaNruWKoOi9veW5tue7keWumuaIkOWKnwogICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgfQogICAgICApCiAgICB9LAoKICAgIGZldGNoV2FyZUxpc3QoKSB7CiAgICAgIHdhcmVBcGkuZmluZEFsbExpc3QoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLndhcmVMaXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICB9KQogICAgfSwKCiAgICBvcGVuU2hvdygpIHsKICAgICAgdGhpcy5vcGVuRGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy5yZWdpb25XYXJlID0ge30KICAgICAgdGhpcy5rZXl3b3JkID0gJycKICAgIH0sCgogICAgb3BlblNhdmUoKSB7CiAgICAgIHRoaXMud2FyZUxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZihpdGVtLmlkID09IHRoaXMucmVnaW9uV2FyZS53YXJlSWQpIHsKICAgICAgICAgIHRoaXMucmVnaW9uV2FyZS53YXJlTmFtZSA9IGl0ZW0ubmFtZQogICAgICAgIH0KICAgICAgfSkKICAgICAgYXBpLnNhdmUodGhpcy5yZWdpb25XYXJlKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLm9wZW5EaWFsb2dWaXNpYmxlID0gZmFsc2UKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogcmVzcG9uc2UubWVzc2FnZQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMuZmV0Y2hEYXRhKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIHVwZGF0ZVN0YXR1cyhpZCwgc3RhdHVzKSB7CiAgICAgIGFwaS51cGRhdGVTdGF0dXMoaWQsIHN0YXR1cykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5oiQ5YqfIScKICAgICAgICAgIH0pCiAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICAgIH0pOwogICAgfSwKCiAgICBxdWVyeVNlYXJjaChxdWVyeVN0cmluZywgY2IpIHsKICAgICAgY29uc29sZS5sb2cocXVlcnlTdHJpbmcpCiAgICAgIGNvbnNvbGUubG9nKGNiKQoKICAgICAgcmVnaW9uQXBpLmZpbmRSZWdpb25CeUtleXdvcmQocXVlcnlTdHJpbmcpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIC8vIOiwg+eUqCBjYWxsYmFjayDov5Tlm57lu7rorq7liJfooajnmoTmlbDmja4KICAgICAgICBjYihyZXNwb25zZS5kYXRhKQogICAgICB9KQogICAgfSwKCiAgICBzZWxlY3REYXRhKGl0ZW0pIHsKICAgICAgdGhpcy5yZWdpb25XYXJlLnJlZ2lvbklkID0gaXRlbS5pZAogICAgICB0aGlzLnJlZ2lvbldhcmUucmVnaW9uTmFtZSA9IGl0ZW0ubmFtZQogICAgfSwKCiAgICAvLyDph43nva7mn6Xor6LooajljZUKICAgIHJlc2V0RGF0YSgpIHsKICAgICAgY29uc29sZS5sb2coJ+mHjee9ruafpeivouihqOWNlScpCiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge30KICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgfSwKCiAgICAvLyDmoLnmja5pZOWIoOmZpOaVsOaNrgogICAgcmVtb3ZlRGF0YUJ5SWQoaWQpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l6K6w5b2VLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4geyAvLyBwcm9taXNlCiAgICAgICAgLy8g54K55Ye756Gu5a6a77yM6L+c56iL6LCD55SoYWpheAogICAgICAgIHJldHVybiBhcGkucmVtb3ZlQnlJZChpZCkKICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmZldGNoRGF0YSh0aGlzLnBhZ2UpCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/sys/regionWare","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <el-form :inline=\"true\">\n        <el-form-item label=\"输入搜索：\">\n          <el-input style=\"width: 203px\" v-model=\"searchObj.keyword\" placeholder=\"关键字\"></el-input>\n        </el-form-item>\n\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"fetchData()\">查询</el-button>\n        <el-button type=\"default\" @click=\"resetData()\">清空</el-button>\n      </el-form>\n    </el-card>\n\n    <!-- 工具条 -->\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <i class=\"el-icon-tickets\" style=\"margin-top: 5px\"></i>\n      <span style=\"margin-top: 5px\">数据列表</span>\n      <el-button class=\"btn-add\" size=\"mini\" @click=\"openShow()\">开通区域</el-button>\n    </el-card>\n\n    <!-- banner列表 -->\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      stripe\n      border\n      style=\"width: 100%;margin-top: 10px;\">\n\n      <el-table-column\n        label=\"序号\"\n        width=\"70\"\n        align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ (page - 1) * limit + scope.$index + 1 }}\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"regionName\" label=\"区域名称\" />\n      <el-table-column prop=\"wareName\" label=\"仓库名称\" />\n      <el-table-column prop=\"createTime\" label=\"创建时间\" />\n      <el-table-column label=\"状态\" width=\"120px\">\n        <template slot-scope=\"scope\">\n          <p>{{ scope.row.status == 0 ? '未开通' : '已开通' }}</p>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\" width=\"200\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"mini\" @click=\"removeDataById(scope.row.id)\">删除</el-button>\n          <el-button v-if=\"scope.row.status === 0\" type=\"text\" size=\"mini\" @click=\"updateStatus(scope.row.id, 1)\">开通</el-button>\n          <el-button v-if=\"scope.row.status === 1\" type=\"text\" size=\"mini\" @click=\"updateStatus(scope.row.id, 0)\">取消开通</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      :current-page=\"page\"\n      :total=\"total\"\n      :page-size=\"limit\"\n      :page-sizes=\"[5, 10, 20, 30, 40, 50, 100]\"\n      style=\"padding: 30px 0; text-align: center;\"\n      layout=\"sizes, prev, pager, next, jumper, ->, total, slot\"\n      @current-change=\"fetchData\"\n      @size-change=\"changeSize\"\n    />\n\n    <el-dialog title=\"开通区域\" :visible.sync=\"openDialogVisible\" width=\"40%\">\n      <el-form ref=\"flashPromotionForm\" label-width=\"150px\" size=\"small\">\n        <el-form-item label=\"区域\">\n          <el-autocomplete\n            v-model=\"keyword\"\n            :fetch-suggestions=\"querySearch\"\n            :trigger-on-focus=\"false\"\n            class=\"inline-input\"\n            placeholder=\"请输入区域关键字\"\n            value-key=\"name\"\n            style=\"width: 200px;\"\n            @select=\"selectData\"\n          />\n        </el-form-item>\n        <el-form-item label=\"仓库\">\n          <el-select v-model=\"regionWare.wareId\" placeholder=\"请选择\">\n            <el-option\n              v-for=\"ware in wareList\"\n              :key=\"ware.id\"\n              :label=\"ware.name\"\n              :value=\"ware.id\"/>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n            <el-button @click=\"openDialogVisible = false\" size=\"small\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"openSave()\" size=\"small\">确 定</el-button>\n          \n        </el-form-item>\n      </el-form>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/sys/regionWare'\nimport wareApi from '@/api/sys/ware'\nimport regionApi from '@/api/sys/region'\nconst defaultForm = {\n  regionId: '',\n  regionName: '',\n  wareId: '',\n  wareName: ''\n}\nexport default {\n  data() {\n    return {\n      listLoading: true, // 数据是否正在加载\n      list: null, // banner列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 10, // 每页记录数\n      searchObj: {}, // 查询表单对象\n\n      openDialogVisible: false,\n      wareList: [],\n      regionList: [],\n      keyword: '',\n      regionWare: defaultForm\n    }\n  },\n\n  // 生命周期函数：内存准备完毕，页面尚未渲染\n  created() {\n    console.log('list created......')\n    this.fetchData()\n    this.fetchWareList()\n  },\n\n  // 生命周期函数：内存准备完毕，页面渲染成功\n  mounted() {\n    console.log('list mounted......')\n  },\n\n  methods: {\n\n    // 当页码发生改变的时候\n    changeSize(size) {\n      console.log(size)\n      this.limit = size\n      this.fetchData(1)\n    },\n\n    // 加载banner列表数据\n    fetchData(page = 1) {\n      console.log('翻页。。。' + page)\n      // 异步获取远程数据（ajax）\n      this.page = page\n\n      api.getPageList(this.page, this.limit, this.searchObj).then(\n        response => {\n          this.list = response.data.records\n          this.total = response.data.total\n\n          // 数据加载并绑定成功\n          this.listLoading = false\n        }\n      )\n    },\n\n    fetchWareList() {\n      wareApi.findAllList().then(response => {\n        this.wareList = response.data\n      })\n    },\n\n    openShow() {\n      this.openDialogVisible = true\n      this.regionWare = {}\n      this.keyword = ''\n    },\n\n    openSave() {\n      this.wareList.forEach(item => {\n        if(item.id == this.regionWare.wareId) {\n          this.regionWare.wareName = item.name\n        }\n      })\n      api.save(this.regionWare).then(response => {\n        this.openDialogVisible = false\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.fetchData()\n        }\n      })\n    },\n\n    updateStatus(id, status) {\n      api.updateStatus(id, status).then(response => {\n          this.$message({\n            type: 'success',\n            message: '操作成功!'\n          })\n        this.fetchData()\n        });\n    },\n\n    querySearch(queryString, cb) {\n      console.log(queryString)\n      console.log(cb)\n\n      regionApi.findRegionByKeyword(queryString).then(response => {\n        // 调用 callback 返回建议列表的数据\n        cb(response.data)\n      })\n    },\n\n    selectData(item) {\n      this.regionWare.regionId = item.id\n      this.regionWare.regionName = item.name\n    },\n\n    // 重置查询表单\n    resetData() {\n      console.log('重置查询表单')\n      this.searchObj = {}\n      this.fetchData()\n    },\n\n    // 根据id删除数据\n    removeDataById(id) {\n      // debugger\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => { // promise\n        // 点击确定，远程调用ajax\n        return api.removeById(id)\n      }).then((response) => {\n        this.fetchData(this.page)\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        }\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    }\n  }\n}\n</script>"]}]}