{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/order/orderInfo/deliverList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/order/orderInfo/deliverList.vue","mtime":1678063974000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvb3JkZXIvb3JkZXJJbmZvJwppbXBvcnQgZHJpdmVyQXBpIGZyb20gJ0AvYXBpL3VzZXIvZHJpdmVyJwppbXBvcnQgd2FyZUFwaSBmcm9tICdAL2FwaS9zeXMvd2FyZScKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsaXN0TG9hZGluZzogZmFsc2UsIC8vIOaVsOaNruaYr+WQpuato+WcqOWKoOi9vQogICAgICBsaXN0OiBudWxsLCAvLyBiYW5uZXLliJfooagKICAgICAgc2VhcmNoT2JqOiB7fSwgLy8g5p+l6K+i6KGo5Y2V5a+56LGhCgogICAgICB3YXJlTGlzdDogW10sCiAgICAgIGxlYWRlckxpc3Q6IFtdLAoKICAgICAgcmVjZWl2ZURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICByZWNlaXZlTGlzdDogW10sCgogICAgICBzZW5kRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIGxlYWRlcklkOiBudWxsLAogICAgICBkcml2ZXJMaXN0OiBbXSwKICAgICAgZHJpdmVyOiBudWxsLAogICAgfQogIH0sCgogIC8vIOeUn+WRveWRqOacn+WHveaVsO+8muWGheWtmOWHhuWkh+WujOavle+8jOmhtemdouWwmuacqua4suafkwogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnbGlzdCBjcmVhdGVkLi4uLi4uJykKICAgIHRoaXMuZmV0Y2hXYXJlTGlzdCgpOwogIH0sCgogIC8vIOeUn+WRveWRqOacn+WHveaVsO+8muWGheWtmOWHhuWkh+WujOavle+8jOmhtemdoua4suafk+aIkOWKnwogIG1vdW50ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnbGlzdCBtb3VudGVkLi4uLi4uJykKICB9LAoKICBtZXRob2RzOiB7CgogICAgLy8g5Yqg6L29YmFubmVy5YiX6KGo5pWw5o2uCiAgICBmZXRjaERhdGEoKSB7CiAgICAgIGFwaS5maW5kUmVjZWl2ZUxpc3QodGhpcy5zZWFyY2hPYmoud2FyZUlkLCB0aGlzLnNlYXJjaE9iai5kYXRlKS50aGVuKAogICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEKCiAgICAgICAgICAvLyDmlbDmja7liqDovb3lubbnu5HlrprmiJDlip8KICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZQogICAgICAgIH0KICAgICAgKQogICAgfSwKCiAgICBmZXRjaFdhcmVMaXN0KCkgewogICAgICB3YXJlQXBpLmZpbmRBbGxMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy53YXJlTGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgIH0sCgogICAgZmV0Y2hSZWNlaXZlTGlzdChsZWFkZXJpZCkgewogICAgICB0aGlzLnJlY2VpdmVEaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICBhcGkuZmluZExlYWRlclJlY2VpdmVMaXN0KGxlYWRlcmlkLCB0aGlzLnNlYXJjaE9iai5kYXRlKS50aGVuKAogICAgICAgIHJlc3BvbnNlID0+IHsKICAgICAgICAgIHRoaXMucmVjZWl2ZUxpc3QgPSByZXNwb25zZS5kYXRhCgogICAgICAgICAgLy8g5pWw5o2u5Yqg6L295bm257uR5a6a5oiQ5YqfCiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2UKICAgICAgICB9CiAgICAgICkKICAgIH0sCgogICAgc2VuZChsZWFkZXJJZCkgewogICAgICB0aGlzLnNlbmREaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICB0aGlzLmxlYWRlcklkID0gbGVhZGVySWQ7CgogICAgICBkcml2ZXJBcGkuZmluZERyaXZlcih0aGlzLnNlYXJjaE9iai53YXJlSWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuZHJpdmVyTGlzdCA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgIH0sCgogICAgc2VuZFNhdmUoKSB7CiAgICAgIHZhciBvcmRlckRlbGl2ZXJWbyA9IHsKICAgICAgICBkZWxpdmVyRGF0ZTogdGhpcy5zZWFyY2hPYmouZGF0ZSwKICAgICAgICBsZWFkZXJJZDogdGhpcy5sZWFkZXJJZCwKICAgICAgICBkcml2ZXJJZDogdGhpcy5kcml2ZXIuaWQsCiAgICAgICAgZHJpdmVyTmFtZTogdGhpcy5kcml2ZXIubmFtZSwKICAgICAgICBkcml2ZXJQaG9uZTogdGhpcy5kcml2ZXIucGhvbmUKICAgICAgfQogICAgICBkZWJ1Z2dlcgogICAgICBhcGkuZGVsaXZlcihvcmRlckRlbGl2ZXJWbykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5Y+R6LSn5oiQ5YqfIScKICAgICAgICB9KQoKICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOmHjee9ruafpeivouihqOWNlQogICAgcmVzZXREYXRhKCkgewogICAgICBjb25zb2xlLmxvZygn6YeN572u5p+l6K+i6KGo5Y2VJykKICAgICAgdGhpcy5zZWFyY2hPYmogPSB7fQogICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["deliverList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"deliverList.vue","sourceRoot":"src/views/order/orderInfo","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <el-form inline>\n\n        <el-form-item label=\"下单时间\">\n          <el-date-picker\n            v-model=\"searchObj.date\"\n            type=\"date\"\n            placeholder=\"选择开始日期\"\n            value-format=\"yyyy-MM-dd\" />\n        </el-form-item>\n\n        <el-form-item label=\"仓库\">\n          <el-select v-model=\"searchObj.wareId\" placeholder=\"请选择\" @change=\"fetchLeaderList\">\n            <el-option\n              v-for=\"ware in wareList\"\n              :key=\"ware.id\"\n              :label=\"ware.name\"\n              :value=\"ware.id\"/>\n          </el-select>\n        </el-form-item>\n\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"fetchData()\">查询</el-button>\n        <el-button type=\"default\" @click=\"resetSearch\">清空</el-button>\n      </el-form>\n    </el-card>\n\n    <!-- 工具条 -->\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <i class=\"el-icon-tickets\" style=\"margin-top: 5px\"></i>\n      <span style=\"margin-top: 5px\">数据列表</span>\n      <el-button class=\"btn-add\" size=\"mini\" style=\"margin: 0 10px;\">打印</el-button>\n    </el-card>\n\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      element-loading-text=\"数据正在加载......\"\n      border\n      fit\n      highlight-current-row>\n\n      <el-table-column\n        type=\"index\"\n        label=\"序号\"\n        width=\"50\"\n        align=\"center\">\n      </el-table-column>\n\n      <el-table-column prop=\"leaderName\" label=\"团长\" width=\"90\"/>\n      <el-table-column prop=\"leaderPhone\" label=\"团长电话\" width=\"100\"/>\n      <el-table-column prop=\"takeName\" label=\"提货点\" width=\"130\"/>\n      <el-table-column prop=\"skuNum\" label=\"商品数量\" width=\"80\"/>\n      <el-table-column prop=\"driverName\" label=\"司机\" width=\"90\"/>\n      <el-table-column prop=\"driverPhone\" label=\"司机电话\" width=\"100\"/>\n      <el-table-column prop=\"deliverDate\" label=\"配送日期\" width=\"100\"/>\n      <el-table-column prop=\"createTime\" label=\"配送时间\"/>\n      <el-table-column label=\"状态\" width=\"100\">\n        <template slot-scope=\"scope\">\n          <p>{{ scope.row.deliverStatus == 0 ? '未发货' : scope.row.deliverStatus == 1 ? '已发货' : '已收货'}}</p>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"140\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"text\" @click=\"fetchReceiveList(scope.row.leaderId)\">发货明细</el-button>\n          <el-button size=\"mini\" type=\"text\" v-if=\"scope.row.deliverStatus == 0\" @click=\"send(scope.row.leaderId)\">发货</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog title=\"发货清单\" :visible.sync=\"receiveDialogVisible\" width=\"40%\">\n      <el-table\n        v-loading=\"listLoading\"\n        :data=\"receiveList\"\n        element-loading-text=\"数据正在加载......\"\n        border\n        fit\n        highlight-current-row>\n\n        <el-table-column\n          type=\"index\"\n          label=\"序号\"\n          width=\"50\"\n          align=\"center\">\n        </el-table-column>\n\n        <el-table-column prop=\"skuName\" label=\"商品\"/>\n        <el-table-column prop=\"skuNum\" label=\"商品数量\" width=\"130\" />\n      </el-table>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"receiveDialogVisible = false\" size=\"small\">取 消</el-button>\n      </span>\n    </el-dialog>\n\n    <el-dialog title=\"发货\" :visible.sync=\"sendDialogVisible\" width=\"40%\">\n      <el-form ref=\"flashPromotionForm\" label-width=\"150px\" size=\"small\">\n        <el-form-item label=\"司机：\">\n          <el-select v-model=\"driver\" placeholder=\"请选择\">\n            <el-option\n              v-for=\"driver in driverList\"\n              :key=\"driver.id\"\n              :label=\"driver.name\"\n              :value=\"driver\"/>\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <template slot-scope=\"scope\">\n            <el-button @click=\"sendDialogVisible = false\" size=\"small\">取 消</el-button>\n            <el-button type=\"primary\" @click=\"sendSave()\" size=\"small\">确 定</el-button>\n          </template>\n        </el-form-item>\n      </el-form>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport api from '@/api/order/orderInfo'\nimport driverApi from '@/api/user/driver'\nimport wareApi from '@/api/sys/ware'\nexport default {\n  data() {\n    return {\n      listLoading: false, // 数据是否正在加载\n      list: null, // banner列表\n      searchObj: {}, // 查询表单对象\n\n      wareList: [],\n      leaderList: [],\n\n      receiveDialogVisible: false,\n      receiveList: [],\n\n      sendDialogVisible: false,\n      leaderId: null,\n      driverList: [],\n      driver: null,\n    }\n  },\n\n  // 生命周期函数：内存准备完毕，页面尚未渲染\n  created() {\n    console.log('list created......')\n    this.fetchWareList();\n  },\n\n  // 生命周期函数：内存准备完毕，页面渲染成功\n  mounted() {\n    console.log('list mounted......')\n  },\n\n  methods: {\n\n    // 加载banner列表数据\n    fetchData() {\n      api.findReceiveList(this.searchObj.wareId, this.searchObj.date).then(\n        response => {\n          this.list = response.data\n\n          // 数据加载并绑定成功\n          this.listLoading = false\n        }\n      )\n    },\n\n    fetchWareList() {\n      wareApi.findAllList().then(response => {\n        this.wareList = response.data\n      })\n    },\n\n    fetchReceiveList(leaderid) {\n      this.receiveDialogVisible = true\n      api.findLeaderReceiveList(leaderid, this.searchObj.date).then(\n        response => {\n          this.receiveList = response.data\n\n          // 数据加载并绑定成功\n          this.listLoading = false\n        }\n      )\n    },\n\n    send(leaderId) {\n      this.sendDialogVisible = true\n      this.leaderId = leaderId;\n\n      driverApi.findDriver(this.searchObj.wareId).then(response => {\n        this.driverList = response.data\n      })\n    },\n\n    sendSave() {\n      var orderDeliverVo = {\n        deliverDate: this.searchObj.date,\n        leaderId: this.leaderId,\n        driverId: this.driver.id,\n        driverName: this.driver.name,\n        driverPhone: this.driver.phone\n      }\n      debugger\n      api.deliver(orderDeliverVo).then(response => {\n        this.$message({\n          type: 'success',\n          message: '发货成功!'\n        })\n\n        this.fetchData()\n      })\n    },\n\n    // 重置查询表单\n    resetData() {\n      console.log('重置查询表单')\n      this.searchObj = {}\n      this.fetchData()\n    }\n  }\n}\n</script>\n"]}]}