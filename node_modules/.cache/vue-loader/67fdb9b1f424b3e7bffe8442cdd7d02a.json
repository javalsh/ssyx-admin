{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/activity/activityInfo/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/activity/activityInfo/form.vue","mtime":1678783520000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL2FjdGl2aXR5L2FjdGl2aXR5SW5mbycKCmNvbnN0IGRlZmF1bHRGb3JtID0gewogIGlkOiAnJywKICBhY3Rpdml0eU5hbWU6ICcnLAogIGFjdGl2aXR5VHlwZTogJ0ZVTExfUkVEVUNUSU9OJywKICBhY3Rpdml0eURlc2M6ICcnLAogIHN0YXJ0VGltZTogJycsCiAgZW5kVGltZTogJycKfQoKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3Rpdml0eUluZm86IGRlZmF1bHRGb3JtLAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlCiAgICB9CiAgfSwKCiAgLy8g55uR5ZCs5ZmoCiAgd2F0Y2g6IHsKICAgICRyb3V0ZSh0bywgZnJvbSkgewogICAgICBjb25zb2xlLmxvZygn6Lev55Sx5Y+Y5YyWLi4uLi4uJykKICAgICAgY29uc29sZS5sb2codG8pCiAgICAgIGNvbnNvbGUubG9nKGZyb20pCiAgICAgIHRoaXMuaW5pdCgpCiAgICB9CiAgfSwKCiAgLy8g55Sf5ZG95ZGo5pyf5pa55rOV77yI5Zyo6Lev55Sx5YiH5o2i77yM57uE5Lu25LiN5Y+Y55qE5oOF5Ya15LiL5LiN5Lya6KKr6LCD55So77yJCiAgY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdmb3JtIGNyZWF0ZWQgLi4uLi4uJykKICAgIHRoaXMuaW5pdCgpCiAgfSwKCiAgbWV0aG9kczogewoKICAgIC8vIOihqOWNleWIneWni+WMlgogICAgaW5pdCgpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcyAmJiB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICAgIHRoaXMuZmV0Y2hEYXRhQnlJZChpZCkKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlr7nosaHmi5PlsZXov5DnrpfnrKbvvJrmi7fotJ3lr7nosaHvvIzogIzkuI3mmK/otYvlgLzlr7nosaHnmoTlvJXnlKgKICAgICAgICB0aGlzLmFjdGl2aXR5SW5mbyA9IHsgLi4uZGVmYXVsdEZvcm0gfQogICAgICB9CiAgICB9LAoKICAgIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlIC8vIOmYsuatouihqOWNlemHjeWkjeaPkOS6pAogICAgICBpZiAoIXRoaXMuYWN0aXZpdHlJbmZvLmlkKSB7CiAgICAgICAgdGhpcy5zYXZlRGF0YSgpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy51cGRhdGVEYXRhKCkKICAgICAgfQogICAgfSwKCiAgICAvLyDmlrDlop4KICAgIHNhdmVEYXRhKCkgewogICAgICBhcGkuc2F2ZSh0aGlzLmFjdGl2aXR5SW5mbykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvYWN0aXZpdHkvYWN0aXZpdHlJbmZvL2xpc3QnIH0pCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDmoLnmja5pZOabtOaWsOiusOW9lQogICAgdXBkYXRlRGF0YSgpIHsKICAgICAgYXBpLnVwZGF0ZUJ5SWQodGhpcy5hY3Rpdml0eUluZm8pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlCiAgICAgICAgICB9KQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2FjdGl2aXR5L2FjdGl2aXR5SW5mby9saXN0JyB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL2FjdGl2aXR5L2FjdGl2aXR5SW5mby9saXN0JyB9KQogICAgfSwKCiAgICAvLyDmoLnmja5pZOafpeivouiusOW9lQogICAgZmV0Y2hEYXRhQnlJZChpZCkgewogICAgICBhcGkuZ2V0QnlJZChpZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy5hY3Rpdml0eUluZm8gPSByZXNwb25zZS5kYXRhCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/activity/activityInfo","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form label-width=\"120px\">\n\n      <el-form-item label=\"活动名称\">\n        <el-input v-model=\"activityInfo.activityName\"/>\n      </el-form-item>\n      <el-form-item label=\"活动类型\">\n        <el-radio-group v-model=\"activityInfo.activityType\">\n          <el-radio label=\"FULL_REDUCTION\">满减</el-radio>\n          <el-radio label=\"FULL_DISCOUNT\">满量打折</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"活动时间\">\n        <el-date-picker\n          v-model=\"activityInfo.startTime\"\n          type=\"date\"\n          placeholder=\"选择开始日期\"\n          value-format=\"yyyy-MM-dd\" />\n        至\n        <el-date-picker\n          v-model=\"activityInfo.endTime\"\n          type=\"date\"\n          placeholder=\"选择开始日期\"\n          value-format=\"yyyy-MM-dd\" />\n      </el-form-item>\n      <el-form-item label=\"活动描述\">\n        <el-input v-model=\"activityInfo.activityDesc\" :rows=\"3\" type=\"textarea\"/>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"saveOrUpdate\">保存</el-button>\n        <el-button @click=\"back\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n\nimport api from '@/api/activity/activityInfo'\n\nconst defaultForm = {\n  id: '',\n  activityName: '',\n  activityType: 'FULL_REDUCTION',\n  activityDesc: '',\n  startTime: '',\n  endTime: ''\n}\n\nexport default {\n  data() {\n    return {\n      activityInfo: defaultForm,\n      saveBtnDisabled: false\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    }\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n\n    // 表单初始化\n    init() {\n      // debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.activityInfo = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.saveBtnDisabled = true // 防止表单重复提交\n      if (!this.activityInfo.id) {\n        this.saveData()\n      } else {\n        this.updateData()\n      }\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.activityInfo).then(response => {\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/activity/activityInfo/list' })\n        }\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.activityInfo).then(response => {\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/activity/activityInfo/list' })\n        }\n      })\n    },\n\n    back() {\n      this.$router.push({ path: '/activity/activityInfo/list' })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        this.activityInfo = response.data\n      })\n    }\n  }\n}\n</script>\n"]}]}