{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/product/category/form.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/product/category/form.vue","mtime":1678063974000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgYXBpIGZyb20gJ0AvYXBpL3Byb2R1Y3QvY2F0ZWdvcnknCgpjb25zdCBpc051bSA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICBjb25zdCBhZ2U9IC9eWzAtOV0qJC8KICBpZiAoIWFnZS50ZXN0KHZhbHVlKSkgewogICAgY2FsbGJhY2sobmV3IEVycm9yKCflj6rog73kuLrmlbDlrZcnKSkKICB9ZWxzZXsKICAgIGNhbGxiYWNrKCkKICB9Cn0KCmNvbnN0IGRlZmF1bHRGb3JtID0gewogIGlkOiAnJywKICBuYW1lOiAnJywKICBzdGF0dXM6ICcnLAogIHNvcnQ6ICcnCn0KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2F0ZWdvcnk6IGRlZmF1bHRGb3JtLAogICAgICBzYXZlQnRuRGlzYWJsZWQ6IGZhbHNlLAoKICAgICAgdmFsaWRhdGVSdWxlczogewogICAgICAgIG5hbWU6IFt7IHJlcXVpcmVkOiB0cnVlLCB0cmlnZ2VyOiAnYmx1cicsIG1lc3NhZ2U6ICflv4XpobvovpPlhaUnIH1dLAogICAgICAgIHNvcnQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIGRlY2ltYWw6MiwgdHJpZ2dlcjogJ2JsdXInLCBtZXNzYWdlOiAn5b+F6aG76L6T5YWlJyB9LAogICAgICAgICAgeyB2YWxpZGF0b3I6IGlzTnVtLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCgogIC8vIOebkeWQrOWZqAogIHdhdGNoOiB7CiAgICAkcm91dGUodG8sIGZyb20pIHsKICAgICAgY29uc29sZS5sb2coJ+i3r+eUseWPmOWMli4uLi4uLicpCiAgICAgIGNvbnNvbGUubG9nKHRvKQogICAgICBjb25zb2xlLmxvZyhmcm9tKQogICAgICB0aGlzLmluaXQoKQogICAgfQogIH0sCgogIC8vIOeUn+WRveWRqOacn+aWueazle+8iOWcqOi3r+eUseWIh+aNou+8jOe7hOS7tuS4jeWPmOeahOaDheWGteS4i+S4jeS8muiiq+iwg+eUqO+8iQogIGNyZWF0ZWQoKSB7CiAgICBjb25zb2xlLmxvZygnZm9ybSBjcmVhdGVkIC4uLi4uLicpCiAgICB0aGlzLmluaXQoKQogIH0sCgogIG1ldGhvZHM6IHsKCiAgICAvLyDooajljZXliJ3lp4vljJYKICAgIGluaXQoKSB7CiAgICAgIC8vIGRlYnVnZ2VyCiAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMgJiYgdGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgY29uc3QgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgICB0aGlzLmZldGNoRGF0YUJ5SWQoaWQpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5a+56LGh5ouT5bGV6L+Q566X56ym77ya5ou36LSd5a+56LGh77yM6ICM5LiN5piv6LWL5YC85a+56LGh55qE5byV55SoCiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHsgLi4uZGVmYXVsdEZvcm0gfQogICAgICB9CiAgICB9LAoKICAgIHNhdmVPclVwZGF0ZSgpIHsKICAgICAgdGhpcy4kcmVmcy5jYXRlZ29yeUZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5zYXZlQnRuRGlzYWJsZWQgPSB0cnVlIC8vIOmYsuatouihqOWNlemHjeWkjeaPkOS6pAogICAgICAgICAgaWYgKCF0aGlzLmNhdGVnb3J5LmlkKSB7CiAgICAgICAgICAgIHRoaXMuc2F2ZURhdGEoKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIC8vIOaWsOWingogICAgc2F2ZURhdGEoKSB7CiAgICAgIGFwaS5zYXZlKHRoaXMuY2F0ZWdvcnkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvcHJvZHVjdC9jYXRlZ29yeS9saXN0JyB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgLy8g5qC55o2uaWTmm7TmlrDorrDlvZUKICAgIHVwZGF0ZURhdGEoKSB7CiAgICAgIGFwaS51cGRhdGVCeUlkKHRoaXMuY2F0ZWdvcnkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGRlYnVnZ2VyCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1lc3NhZ2UKICAgICAgICAgIH0pCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvcHJvZHVjdC9jYXRlZ29yeS9saXN0JyB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgYmFjaygpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL3Byb2R1Y3QvY2F0ZWdvcnkvbGlzdCcgfSkKICAgIH0sCgogICAgLy8g5qC55o2uaWTmn6Xor6LorrDlvZUKICAgIGZldGNoRGF0YUJ5SWQoaWQpIHsKICAgICAgYXBpLmdldEJ5SWQoaWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIC8vIGRlYnVnZ2VyCiAgICAgICAgdGhpcy5jYXRlZ29yeSA9IHJlc3BvbnNlLmRhdGEKICAgICAgfSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["form.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"form.vue","sourceRoot":"src/views/product/category","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form ref=\"categoryForm\" :model=\"category\" :rules=\"validateRules\" label-width=\"120px\">\n\n      <el-form-item label=\"分类名称\" prop=\"name\">\n        <el-input v-model=\"category.name\"/>\n      </el-form-item>\n      <el-form-item label=\"排序\" prop=\"sort\">\n        <el-input v-model=\"category.sort\"/>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button :disabled=\"saveBtnDisabled\" type=\"primary\" @click=\"saveOrUpdate\">保存</el-button>\n        <el-button @click=\"back\">返回</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\n\nimport api from '@/api/product/category'\n\nconst isNum = (rule, value, callback) => {\n  const age= /^[0-9]*$/\n  if (!age.test(value)) {\n    callback(new Error('只能为数字'))\n  }else{\n    callback()\n  }\n}\n\nconst defaultForm = {\n  id: '',\n  name: '',\n  status: '',\n  sort: ''\n}\n\nexport default {\n  data() {\n    return {\n      category: defaultForm,\n      saveBtnDisabled: false,\n\n      validateRules: {\n        name: [{ required: true, trigger: 'blur', message: '必须输入' }],\n        sort: [\n          { required: true, decimal:2, trigger: 'blur', message: '必须输入' },\n          { validator: isNum, trigger: 'blur' }\n        ]\n      }\n    }\n  },\n\n  // 监听器\n  watch: {\n    $route(to, from) {\n      console.log('路由变化......')\n      console.log(to)\n      console.log(from)\n      this.init()\n    }\n  },\n\n  // 生命周期方法（在路由切换，组件不变的情况下不会被调用）\n  created() {\n    console.log('form created ......')\n    this.init()\n  },\n\n  methods: {\n\n    // 表单初始化\n    init() {\n      // debugger\n      if (this.$route.params && this.$route.params.id) {\n        const id = this.$route.params.id\n        this.fetchDataById(id)\n      } else {\n        // 对象拓展运算符：拷贝对象，而不是赋值对象的引用\n        this.category = { ...defaultForm }\n      }\n    },\n\n    saveOrUpdate() {\n      this.$refs.categoryForm.validate(valid => {\n        if (valid) {\n          this.saveBtnDisabled = true // 防止表单重复提交\n          if (!this.category.id) {\n            this.saveData()\n          } else {\n            this.updateData()\n          }\n        }\n      })\n    },\n\n    // 新增\n    saveData() {\n      api.save(this.category).then(response => {\n        // debugger\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/product/category/list' })\n        }\n      })\n    },\n\n    // 根据id更新记录\n    updateData() {\n      api.updateById(this.category).then(response => {\n        debugger\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: response.message\n          })\n          this.$router.push({ path: '/product/category/list' })\n        }\n      })\n    },\n\n    back() {\n      this.$router.push({ path: '/product/category/list' })\n    },\n\n    // 根据id查询记录\n    fetchDataById(id) {\n      api.getById(id).then(response => {\n        // debugger\n        this.category = response.data\n      })\n    }\n  }\n}\n</script>\n"]}]}