{"remainingRequest":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/product/skuInfo/list.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/src/views/product/skuInfo/list.vue","mtime":1678697578000},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/babel-loader/lib/index.js","mtime":1688442878961},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/cache-loader/dist/cjs.js","mtime":1688442891160},{"path":"/Users/liushaohua/Project/ssyx-web/ssyx-admin/node_modules/vue-loader/lib/index.js","mtime":1688442880248}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAnQC9hcGkvcHJvZHVjdC9za3VJbmZvJwppbXBvcnQgY2F0ZWdvcnlBcGkgZnJvbSAnQC9hcGkvcHJvZHVjdC9jYXRlZ29yeScKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdExvYWRpbmc6IHRydWUsIC8vIOaVsOaNruaYr+WQpuato+WcqOWKoOi9vQogICAgICBsaXN0OiBudWxsLCAvLyBiYW5uZXLliJfooagKICAgICAgdG90YWw6IDAsIC8vIOaVsOaNruW6k+S4reeahOaAu+iusOW9leaVsAogICAgICBwYWdlOiAxLCAvLyDpu5jorqTpobXnoIEKICAgICAgbGltaXQ6IDEwLCAvLyDmr4/pobXorrDlvZXmlbAKICAgICAgc2VhcmNoT2JqOiB7fSwgLy8g5p+l6K+i6KGo5Y2V5a+56LGhCiAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwgLy8g5om56YeP6YCJ5oup5Lit6YCJ5oup55qE6K6w5b2V5YiX6KGoCgogICAgICBjYXRlZ29yeUxpc3Q6IFtdCiAgICB9CiAgfSwKCiAgLy8g55Sf5ZG95ZGo5pyf5Ye95pWw77ya5YaF5a2Y5YeG5aSH5a6M5q+V77yM6aG16Z2i5bCa5pyq5riy5p+TCiAgY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdsaXN0IGNyZWF0ZWQuLi4uLi4nKQogICAgdGhpcy5mZXRjaERhdGEoKQogICAgdGhpcy5mZXRjaENhdGVnb3J5TGlzdCgpCiAgfSwKCiAgLy8g55Sf5ZG95ZGo5pyf5Ye95pWw77ya5YaF5a2Y5YeG5aSH5a6M5q+V77yM6aG16Z2i5riy5p+T5oiQ5YqfCiAgbW91bnRlZCgpIHsKICAgIGNvbnNvbGUubG9nKCdsaXN0IG1vdW50ZWQuLi4uLi4nKQogIH0sCgogIG1ldGhvZHM6IHsKCiAgICAvLyDlvZPpobXnoIHlj5HnlJ/mlLnlj5jnmoTml7blgJkKICAgIGNoYW5nZVNpemUoc2l6ZSkgewogICAgICBjb25zb2xlLmxvZyhzaXplKQogICAgICB0aGlzLmxpbWl0ID0gc2l6ZQogICAgICB0aGlzLmZldGNoRGF0YSgxKQogICAgfSwKCiAgICBhZGQoKXsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goeyBwYXRoOiAnL3Byb2R1Y3Qvc2t1SW5mby9hZGQnIH0pCiAgICB9LAoKICAgIC8vIOWKoOi9vWJhbm5lcuWIl+ihqOaVsOaNrgogICAgZmV0Y2hEYXRhKHBhZ2UgPSAxKSB7CiAgICAgIGNvbnNvbGUubG9nKCfnv7vpobXjgILjgILjgIInICsgcGFnZSkKICAgICAgLy8g5byC5q2l6I635Y+W6L+c56iL5pWw5o2u77yIYWpheO+8iQogICAgICB0aGlzLnBhZ2UgPSBwYWdlCgogICAgICBhcGkuZ2V0UGFnZUxpc3QodGhpcy5wYWdlLCB0aGlzLmxpbWl0LCB0aGlzLnNlYXJjaE9iaikudGhlbigKICAgICAgICByZXNwb25zZSA9PiB7CiAgICAgICAgICBkZWJ1Z2dlcgogICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5yZWNvcmRzCiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbAoKICAgICAgICAgIC8vIOaVsOaNruWKoOi9veW5tue7keWumuaIkOWKnwogICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlCiAgICAgICAgfQogICAgICApCiAgICB9LAoKICAgIGZldGNoQ2F0ZWdvcnlMaXN0KCkgewogICAgICBjYXRlZ29yeUFwaS5maW5kQWxsTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzcG9uc2UuZGF0YQogICAgICB9KQogICAgfSwKCiAgICAvLyDph43nva7mn6Xor6LooajljZUKICAgIHJlc2V0RGF0YSgpIHsKICAgICAgY29uc29sZS5sb2coJ+mHjee9ruafpeivouihqOWNlScpCiAgICAgIHRoaXMuc2VhcmNoT2JqID0ge30KICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgfSwKCiAgICAvLyDmoLnmja5pZOWIoOmZpOaVsOaNrgogICAgcmVtb3ZlRGF0YUJ5SWQoaWQpIHsKICAgICAgLy8gZGVidWdnZXIKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l6K6w5b2VLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oKCkgPT4geyAvLyBwcm9taXNlCiAgICAgICAgLy8g54K55Ye756Gu5a6a77yM6L+c56iL6LCD55SoYWpheAogICAgICAgIHJldHVybiBhcGkucmVtb3ZlQnlJZChpZCkKICAgICAgfSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLmZldGNoRGF0YSh0aGlzLnBhZ2UpCiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUpIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSkKICAgICAgfSkKICAgIH0sCgogICAgLy8g5b2T6KGo5qC85aSN6YCJ5qGG6YCJ6aG55Y+R55Sf5Y+Y5YyW55qE5pe25YCZ6Kem5Y+RCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2Uoc2VsZWN0aW9uKSB7CiAgICAgIGNvbnNvbGUubG9nKCdoYW5kbGVTZWxlY3Rpb25DaGFuZ2UuLi4uLi4nKQogICAgICBjb25zb2xlLmxvZyhzZWxlY3Rpb24pCiAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24gPSBzZWxlY3Rpb24KICAgIH0sCgogICAgLy8g5om56YeP5Yig6ZmkCiAgICByZW1vdmVSb3dzKCkgewogICAgICBjb25zb2xlLmxvZygncmVtb3ZlUm93cy4uLi4uLicpCgogICAgICBpZiAodGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5sZW5ndGggPT09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fpgInmi6nopoHliKDpmaTnmoTorrDlvZUhJwogICAgICAgIH0pCiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICB9KS50aGVuKCgpID0+IHsgLy8gcHJvbWlzZQogICAgICAgIC8vIOeCueWHu+ehruWumu+8jOi/nOeoi+iwg+eUqGFqYXgKICAgICAgICAvLyDpgY3ljoZzZWxlY3Rpb27vvIzlsIZpZOWPluWHuuaUvuWFpWlk5YiX6KGoCiAgICAgICAgdmFyIGlkTGlzdCA9IFtdCiAgICAgICAgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbi5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgaWRMaXN0LnB1c2goaXRlbS5pZCkKICAgICAgICAvLyBjb25zb2xlLmxvZyhpZExpc3QpCiAgICAgICAgfSkKICAgICAgICAvLyDosIPnlKhhcGkKICAgICAgICByZXR1cm4gYXBpLnJlbW92ZVJvd3MoaWRMaXN0KQogICAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIHRoaXMuZmV0Y2hEYXRhKHRoaXMucGFnZSkKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KQogICAgICB9KQogICAgfSwKCiAgICBoYW5kbGVQdWJsaXNoU3RhdHVzQ2hhbmdlKGluZGV4LCByb3cpIHsKICAgICAgZGVidWdnZXIKICAgICAgaWYocm93LmNoZWNrU3RhdHVzICE9PSAxKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5a6h5qC46YCa6L+H5omN5Y+v5Lul5LiK57qn5oiW5LiL5p62JwogICAgICAgIH0pCiAgICAgICAgcm93LnB1Ymxpc2hTdGF0dXMgPSByb3cucHVibGlzaFN0YXR1cyA9PT0gMSA/IDAgOiAxCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgYXBpLnB1Ymxpc2gocm93LmlkLCByb3cucHVibGlzaFN0YXR1cykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5oiQ5YqfJwogICAgICAgIH0pCiAgICAgICAgdGhpcy5mZXRjaERhdGEoKQogICAgICB9KQogICAgfSwKCiAgICBoYW5kbGVTdGF0dXNDaGFuZ2UoaW5kZXgsIHJvdykgewogICAgICBkZWJ1Z2dlcgogICAgICBhcGkuY2hlY2socm93LmlkLCByb3cuY2hlY2tTdGF0dXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOaIkOWKnycKICAgICAgICB9KQogICAgICAgIHRoaXMuZmV0Y2hEYXRhKCkKICAgICAgfSkKICAgIH0sCgogICAgaGFuZGxlTmV3UGVyc29uQ2hhbmdlKGluZGV4LCByb3cpIHsKICAgICAgZGVidWdnZXIKICAgICAgYXBpLmlzTmV3UGVyc29uKHJvdy5pZCwgcm93LmlzTmV3UGVyc29uKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8nCiAgICAgICAgfSkKICAgICAgICB0aGlzLmZldGNoRGF0YSgpCiAgICAgIH0pCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0IA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/views/product/skuInfo","sourcesContent":["<template>\n  <div class=\"app-container\">\n\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <el-form inline>\n        <el-form-item label=\"关键字\">\n          <el-input type=\"text\" width=\"100\" placeholder=\"关键字\" v-model=\"searchObj.keyword\" clearable/>\n        </el-form-item>\n\n        <el-form-item label=\"商品分类\" prop=\"tmId\">\n          <el-select v-model=\"searchObj.categoryId\" placeholder=\"请选择\" >\n            <el-option\n              v-for=\"category in categoryList\"\n              :key=\"category.id\"\n              :label=\"category.name\"\n              :value=\"category.id\"/>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"商品类型\">\n          <el-select v-model=\"searchObj.skuType\" clearable placeholder=\"请选择\">\n            <el-option value=\"0\" label=\"普通商品\"/>\n            <el-option value=\"1\" label=\"秒杀商品\"/>\n          </el-select>\n        </el-form-item>\n\n        <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"fetchData()\">查询</el-button>\n        <el-button type=\"default\" @click=\"resetSearch\">清空</el-button>\n      </el-form>\n    </el-card>\n\n    <!-- 工具条 -->\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <i class=\"el-icon-tickets\" style=\"margin-top: 5px\"></i>\n      <span style=\"margin-top: 5px\">数据列表</span>\n      <el-button class=\"btn-add\" size=\"mini\" @click=\"add()\" >添加</el-button>\n      <el-button class=\"btn-add\" size=\"mini\" @click=\"removeRows()\" style=\"margin: 0 10px;\">批量删除</el-button>\n    </el-card>\n\n    <!-- banner列表 -->\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      stripe\n      border\n      style=\"width: 100%;margin-top: 10px;\"\n      @selection-change=\"handleSelectionChange\">\n\n      <el-table-column\n        type=\"selection\"\n        width=\"55\" />\n\n      <el-table-column label=\"SUK_ID/sku编号\" width=\"120px\">\n        <template slot-scope=\"scope\">\n          <p>ID：{{ scope.row.id }}</p>\n          <p>编号：{{ scope.row.skuCode }}</p>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"skuName\" label=\"sku名称\" />\n      <el-table-column label=\"商品图片\" width=\"140\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <img style=\"height: 80px\" :src=\"scope.row.imgUrl\">\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"库存/预警库存/..\" width=\"140px\">\n        <template slot-scope=\"scope\">\n          <p>库存：{{ scope.row.stock }}</p>\n          <p>预警库存：{{ scope.row.lowStock }}</p>\n          <p>锁定库存：{{ scope.row.lockStock }}</p>\n          <p>限购个数：{{ scope.row.perLimit }}</p>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"price\" label=\"价格/市场价\" width=\"120px\">\n        <template slot-scope=\"scope\">\n          <p>价格：￥{{ scope.row.price }}</p>\n          <p>市场价：{{ scope.row.marketPrice }}</p>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"sale\" label=\"销量\" />\n      <el-table-column prop=\"sort\" label=\"排序\" />\n      <el-table-column label=\"标签\" width=\"160px\">\n        <template slot-scope=\"scope\">\n          <p>上架/下架：\n            <el-switch\n              @change=\"handlePublishStatusChange(scope.$index, scope.row)\"\n              :inactive-value = 0\n              :active-value = 1\n              v-model=\"scope.row.publishStatus\"\n              >\n            </el-switch>\n          </p>\n          <p>审核状态：\n            <el-switch\n              @change=\"handleStatusChange(scope.$index, scope.row)\"\n              :active-value=\"1\"\n              :inactive-value=\"0\"\n              v-model=\"scope.row.checkStatus\"\n              >\n            </el-switch>\n          </p>\n          <p>新人专享：\n            <el-switch\n              @change=\"handleNewPersonChange(scope.$index, scope.row)\"\n              :active-value=\"1\"\n              :inactive-value=\"0\"\n              v-model=\"scope.row.isNewPerson\"\n              >\n            </el-switch>\n          </p>\n        </template>\n      </el-table-column>\n\n      <el-table-column label=\"操作\" width=\"150\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <router-link :to=\"'/product/skuInfo/edit/'+scope.row.id\">\n            <el-button type=\"text\" size=\"mini\">修改</el-button>\n          </router-link>\n          <el-button type=\"text\" size=\"mini\" @click=\"removeDataById(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!-- 分页组件 -->\n    <el-pagination\n      :current-page=\"page\"\n      :total=\"total\"\n      :page-size=\"limit\"\n      :page-sizes=\"[5, 10, 20, 30, 40, 50, 100]\"\n      style=\"padding: 30px 0; text-align: center;\"\n      layout=\"sizes, prev, pager, next, jumper, ->, total, slot\"\n      @current-change=\"fetchData\"\n      @size-change=\"changeSize\"\n    />\n  </div>\n</template>\n\n<script>\nimport api from '@/api/product/skuInfo'\nimport categoryApi from '@/api/product/category'\n\nexport default {\n  data() {\n    return {\n      listLoading: true, // 数据是否正在加载\n      list: null, // banner列表\n      total: 0, // 数据库中的总记录数\n      page: 1, // 默认页码\n      limit: 10, // 每页记录数\n      searchObj: {}, // 查询表单对象\n      multipleSelection: [], // 批量选择中选择的记录列表\n\n      categoryList: []\n    }\n  },\n\n  // 生命周期函数：内存准备完毕，页面尚未渲染\n  created() {\n    console.log('list created......')\n    this.fetchData()\n    this.fetchCategoryList()\n  },\n\n  // 生命周期函数：内存准备完毕，页面渲染成功\n  mounted() {\n    console.log('list mounted......')\n  },\n\n  methods: {\n\n    // 当页码发生改变的时候\n    changeSize(size) {\n      console.log(size)\n      this.limit = size\n      this.fetchData(1)\n    },\n\n    add(){\n      this.$router.push({ path: '/product/skuInfo/add' })\n    },\n\n    // 加载banner列表数据\n    fetchData(page = 1) {\n      console.log('翻页。。。' + page)\n      // 异步获取远程数据（ajax）\n      this.page = page\n\n      api.getPageList(this.page, this.limit, this.searchObj).then(\n        response => {\n          debugger\n          this.list = response.data.records\n          this.total = response.data.total\n\n          // 数据加载并绑定成功\n          this.listLoading = false\n        }\n      )\n    },\n\n    fetchCategoryList() {\n      categoryApi.findAllList().then(response => {\n        this.categoryList = response.data\n      })\n    },\n\n    // 重置查询表单\n    resetData() {\n      console.log('重置查询表单')\n      this.searchObj = {}\n      this.fetchData()\n    },\n\n    // 根据id删除数据\n    removeDataById(id) {\n      // debugger\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => { // promise\n        // 点击确定，远程调用ajax\n        return api.removeById(id)\n      }).then((response) => {\n        this.fetchData(this.page)\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        }\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n\n    // 当表格复选框选项发生变化的时候触发\n    handleSelectionChange(selection) {\n      console.log('handleSelectionChange......')\n      console.log(selection)\n      this.multipleSelection = selection\n    },\n\n    // 批量删除\n    removeRows() {\n      console.log('removeRows......')\n\n      if (this.multipleSelection.length === 0) {\n        this.$message({\n          type: 'warning',\n          message: '请选择要删除的记录!'\n        })\n        return\n      }\n\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => { // promise\n        // 点击确定，远程调用ajax\n        // 遍历selection，将id取出放入id列表\n        var idList = []\n        this.multipleSelection.forEach(item => {\n          idList.push(item.id)\n        // console.log(idList)\n        })\n        // 调用api\n        return api.removeRows(idList)\n      }).then((response) => {\n        this.fetchData(this.page)\n        if (response.code) {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n        }\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        })\n      })\n    },\n\n    handlePublishStatusChange(index, row) {\n      debugger\n      if(row.checkStatus !== 1) {\n        this.$message({\n          type: 'info',\n          message: '审核通过才可以上级或下架'\n        })\n        row.publishStatus = row.publishStatus === 1 ? 0 : 1\n        return\n      }\n      api.publish(row.id, row.publishStatus).then(response => {\n        this.$message({\n          type: 'info',\n          message: '操作成功'\n        })\n        this.fetchData()\n      })\n    },\n\n    handleStatusChange(index, row) {\n      debugger\n      api.check(row.id, row.checkStatus).then(response => {\n        this.$message({\n          type: 'info',\n          message: '操作成功'\n        })\n        this.fetchData()\n      })\n    },\n\n    handleNewPersonChange(index, row) {\n      debugger\n      api.isNewPerson(row.id, row.isNewPerson).then(response => {\n        this.$message({\n          type: 'info',\n          message: '操作成功'\n        })\n        this.fetchData()\n      })\n    }\n  }\n}\n</script>\n\n"]}]}