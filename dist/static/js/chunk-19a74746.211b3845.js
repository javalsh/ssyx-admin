(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19a74746"],{1805:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("h4",[t._v("优惠券信息")]),n("table",{staticClass:"table table-striped table-condenseda table-bordered",attrs:{width:"100%"}},[n("tbody",[n("tr",[n("th",{attrs:{width:"15%"}},[t._v("优惠券名称")]),n("td",{attrs:{width:"35%"}},[n("b",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.couponInfo.couponName))])]),n("th",{attrs:{width:"15%"}},[t._v("优惠券类型")]),n("td",{attrs:{width:"35%"}},[t._v(" "+t._s(t.couponInfo.couponTypeString)+" ")])]),n("tr",[n("th",[t._v("发行数量")]),n("td",[t._v(t._s(t.couponInfo.publishCount))]),n("th",[t._v("每人限领次数")]),n("td",[t._v(t._s(t.couponInfo.perLimit))])]),n("tr",[n("th",[t._v("领取时间")]),n("td",[t._v(t._s(t.couponInfo.startTime)+"至"+t._s(t.couponInfo.endTime))]),n("th",[t._v("过期时间")]),n("td",[t._v(t._s(t.couponInfo.expireTime))])])])]),n("h4",[t._v("添加规则")]),n("el-form",{staticStyle:{background:"#f9f9f9","padding-top":"15px","padding-bottom":"1px"},attrs:{"label-width":"140px"}},["CASH"==t.couponInfo.couponType?n("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"现金券金额（元）"}},[n("el-input",{model:{value:t.couponInfo.amount,callback:function(e){t.$set(t.couponInfo,"amount",e)},expression:"couponInfo.amount"}})],1):t._e(),"FULL_REDUCTION"==t.couponInfo.couponType?n("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"满减金额（元）"}},[n("el-input",{model:{value:t.couponInfo.conditionAmount,callback:function(e){t.$set(t.couponInfo,"conditionAmount",e)},expression:"couponInfo.conditionAmount"}})],1):t._e(),"FULL_REDUCTION"==t.couponInfo.couponType?n("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"优惠金额（元）"}},[n("el-input",{model:{value:t.couponInfo.amount,callback:function(e){t.$set(t.couponInfo,"amount",e)},expression:"couponInfo.amount"}})],1):t._e()],1),n("h4",[t._v("优惠券范围选择")]),n("el-form",{staticStyle:{background:"#f9f9f9","padding-top":"15px","padding-left":"15px","padding-bottom":"1px"},attrs:{"label-width":"0px"}},[n("el-form-item",[n("el-radio-group",{model:{value:t.couponInfo.rangeType,callback:function(e){t.$set(t.couponInfo,"rangeType",e)},expression:"couponInfo.rangeType"}},[n("el-radio",{attrs:{label:"ALL"}},[t._v("通用")]),n("el-radio",{attrs:{label:"SKU"}},[t._v("SKU")]),n("el-radio",{attrs:{label:"CATEGORY"}},[t._v("分类")])],1)],1)],1),"SKU"==t.couponInfo.rangeType?n("div",[n("el-dialog",{attrs:{title:"添加范围",visible:t.dialogSkduRangVisible,width:"490px"},on:{"update:visible":function(e){t.dialogSkduRangVisible=e}}},[n("div",{staticStyle:{"margin-top":"20px"}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-form-item",[n("el-autocomplete",{staticClass:"inline-input",staticStyle:{width:"400px"},attrs:{"fetch-suggestions":t.querySkuSearch,"trigger-on-focus":!1,placeholder:"请输入关键字，选择活动商品","value-key":"skuName"},on:{select:t.selectSkuData},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),n("el-form-item",[n("el-button",{attrs:{type:""},on:{click:function(e){t.dialogSkduRangVisible=!1}}},[t._v("取消")])],1)],1)],1)]),n("h4",[t._v(" 优惠券范围列表 "),n("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){t.dialogSkduRangVisible=!0}}},[t._v("添加优惠券范围")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.skuInfoList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}],null,!1,3056706777)}),n("el-table-column",{attrs:{prop:"id",label:"sku ID",width:"100"}}),n("el-table-column",{attrs:{prop:"skuName",label:"sku名称",width:"120"}}),n("el-table-column",{attrs:{prop:"skuCode",label:"sku编号"}}),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return t.removeSkuDataById(e.$index)}}},[t._v("删除")])]}}],null,!1,1570803384)})],1)],1):t._e(),"CATEGORY"==t.couponInfo.rangeType?n("div",[n("el-dialog",{attrs:{title:"添加范围",visible:t.dialogCateRangVisible,width:"490px"},on:{"update:visible":function(e){t.dialogCateRangVisible=e}}},[n("div",{staticStyle:{"margin-top":"20px"}},[n("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[n("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择"},on:{change:t.selectCategory}},t._l(t.selectCategoryList,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),n("el-form-item",[n("el-button",{attrs:{type:""},on:{click:function(e){t.dialogCateRangVisible=!1}}},[t._v("取消")])],1)],1)],1)]),n("h4",[t._v(" 优惠券范围列表 "),n("el-button",{attrs:{type:"",size:"mini"},on:{click:function(e){t.dialogCateRangVisible=!0}}},[t._v("添加优惠券范围")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.categoryList,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}],null,!1,3056706777)}),n("el-table-column",{attrs:{prop:"id",label:"分类ID",width:"100"}}),n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.removeCateDataById(e.$index)}}},[t._v("删除")])]}}],null,!1,1721744262)})],1)],1):t._e(),"ALL"==t.couponInfo.rangeType?n("div",[n("span",[t._v("通用")])]):t._e(),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-form",{attrs:{"label-width":"0px"}},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),n("el-button",{on:{click:t.back}},[t._v("返回")])],1)],1)],1)],1)},a=[],i=(n("d3b7"),n("159b"),n("b0c0"),n("a434"),n("4c3d")),c=n("9de8"),l=n("aab4"),u={data:function(){return{listLoading:!1,couponInfo:{},saveBtnDisabled:!1,dialogSkduRangVisible:!1,keyword:"",skuInfoList:[],dialogCateRangVisible:!1,categoryList:[],selectCategoryList:[]}},watch:{$route:function(t,e){console.log("路由变化......"),console.log(t),console.log(e),this.init()}},created:function(){console.log("form created ......"),this.init()},methods:{init:function(){var t=this.$route.params.id;this.fetchDataById(t),this.fetchRuleDataById(t),this.fetchCategoryList()},fetchCategoryList:function(){var t=this;l["a"].findAllList().then((function(e){t.selectCategoryList=e.data}))},save:function(){var t=this,e="可购买",n=[];"SKU"===this.couponInfo.rangeType&&this.skuInfoList.forEach((function(t){e+="：",n.push({rangeType:"SKU",rangeId:t.id}),e+=t.spuName+","})),"CATEGORY"===this.couponInfo.rangeType&&(e+="分类：",this.categoryList.forEach((function(t){n.push({rangeType:"CATEGORY",rangeId:t.id}),e+=t.name+","}))),"ALL"===this.couponInfo.rangeType&&(e+="全场通用,"),e=e.length>3?e.substring(0,e.length-1):this.couponInfo.couponName;var o={couponId:this.couponInfo.id,rangeType:this.couponInfo.rangeType,amount:this.couponInfo.amount,conditionAmount:this.couponInfo.conditionAmount,couponRangeList:n,rangeDesc:e};i["a"].saveCouponRule(o).then((function(e){t.$message.success(e.message),t.$router.push({path:"/activity/couponInfo/list"})}))},removeDataById:function(t){this.activityRuleList.splice(t,1)},back:function(){window.history.go(-1)},fetchRuleDataById:function(t){var e=this;i["a"].findCouponRuleList(t).then((function(t){e.skuInfoList=t.data.skuInfoList||[],e.categoryList=t.data.categoryList||[],e.trademarkList=t.data.trademarkList||[]}))},fetchDataById:function(t){var e=this;i["a"].getById(t).then((function(t){e.couponInfo=t.data}))},querySkuSearch:function(t,e){console.log(t),console.log(e),c["a"].findSkuInfoByKeyword(t).then((function(t){e(t.data)}))},selectSkuData:function(t){this.skuInfoList.push(t),this.dialogSkduRangVisible=!1},removeSkuDataById:function(t){this.skuInfoList.splice(t,1)},selectCategory:function(t){var e=this;console.log(t),l["a"].getById(t).then((function(n){e.categoryList.push({id:t,name:n.data.name})})),this.dialogCateRangVisible=!1},removeCateDataById:function(t){this.categoryList.splice(t,1)}}},r=u,s=(n("ec90"),n("2877")),d=Object(s["a"])(r,o,a,!1,null,null,null);e["default"]=d.exports},"4c3d":function(t,e,n){"use strict";n("99af");var o=n("b775"),a="/admin/activity/couponInfo";e["a"]={getPageList:function(t,e){return Object(o["a"])({url:"".concat(a,"/").concat(t,"/").concat(e),method:"get"})},getById:function(t){return Object(o["a"])({url:"".concat(a,"/get/").concat(t),method:"get"})},save:function(t){return Object(o["a"])({url:"".concat(a,"/save"),method:"post",data:t})},updateById:function(t){return Object(o["a"])({url:"".concat(a,"/update"),method:"put",data:t})},removeById:function(t){return Object(o["a"])({url:"".concat(a,"/remove/").concat(t),method:"delete"})},removeRows:function(t){return Object(o["a"])({url:"".concat(a,"/batchRemove"),method:"delete",data:t})},findCouponRuleList:function(t){return Object(o["a"])({url:"".concat(a,"/findCouponRuleList/").concat(t),method:"get"})},saveCouponRule:function(t){return Object(o["a"])({url:"".concat(a,"/saveCouponRule"),method:"post",data:t})},findCouponByKeyword:function(t){return Object(o["a"])({url:"".concat(a,"/findCouponByKeyword/").concat(t),method:"get"})}}},"9de8":function(t,e,n){"use strict";n("99af");var o=n("b775"),a="/admin/activity/activityInfo";e["a"]={getPageList:function(t,e){return Object(o["a"])({url:"".concat(a,"/").concat(t,"/").concat(e),method:"get"})},getById:function(t){return Object(o["a"])({url:"".concat(a,"/get/").concat(t),method:"get"})},save:function(t){return Object(o["a"])({url:"".concat(a,"/save"),method:"post",data:t})},updateById:function(t){return Object(o["a"])({url:"".concat(a,"/update"),method:"put",data:t})},removeById:function(t){return Object(o["a"])({url:"".concat(a,"/remove/").concat(t),method:"delete"})},removeRows:function(t){return Object(o["a"])({url:"".concat(a,"/batchRemove"),method:"delete",data:t})},findActivityRuleList:function(t){return Object(o["a"])({url:"".concat(a,"/findActivityRuleList/").concat(t),method:"get"})},saveActivityRule:function(t){return Object(o["a"])({url:"".concat(a,"/saveActivityRule"),method:"post",data:t})},findSkuInfoByKeyword:function(t){return Object(o["a"])({url:"".concat(a,"/findSkuInfoByKeyword/").concat(t),method:"get"})}}},a434:function(t,e,n){"use strict";var o=n("23e7"),a=n("23cb"),i=n("a691"),c=n("50c4"),l=n("7b0b"),u=n("65f0"),r=n("8418"),s=n("1dde"),d=n("ae40"),f=s("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var n,o,s,d,f,p,v=l(this),y=c(v.length),I=a(t,y),k=arguments.length;if(0===k?n=o=0:1===k?(n=0,o=y-I):(n=k-2,o=h(m(i(e),0),y-I)),y+n-o>g)throw TypeError(b);for(s=u(v,o),d=0;d<o;d++)f=I+d,f in v&&r(s,d,v[f]);if(s.length=o,n<o){for(d=I;d<y-o;d++)f=d+o,p=d+n,f in v?v[p]=v[f]:delete v[p];for(d=y;d>y-o+n;d--)delete v[d-1]}else if(n>o)for(d=y-o;d>I;d--)f=d+o-1,p=d+n-1,f in v?v[p]=v[f]:delete v[p];for(d=0;d<n;d++)v[d+I]=arguments[d+2];return v.length=y-o+n,s}})},aab4:function(t,e,n){"use strict";n("99af");var o=n("b775"),a="/admin/product/category";e["a"]={getPageList:function(t,e,n){return Object(o["a"])({url:"".concat(a,"/").concat(t,"/").concat(e),method:"get",params:n})},getById:function(t){return Object(o["a"])({url:"".concat(a,"/get/").concat(t),method:"get"})},save:function(t){return Object(o["a"])({url:"".concat(a,"/save"),method:"post",data:t})},updateById:function(t){return Object(o["a"])({url:"".concat(a,"/update"),method:"put",data:t})},removeById:function(t){return Object(o["a"])({url:"".concat(a,"/remove/").concat(t),method:"delete"})},removeRows:function(t){return Object(o["a"])({url:"".concat(a,"/batchRemove"),method:"delete",data:t})},findAllList:function(){return Object(o["a"])({url:"".concat(a,"/findAllList"),method:"get"})}}},b4b2:function(t,e,n){},ec90:function(t,e,n){"use strict";n("b4b2")}}]);