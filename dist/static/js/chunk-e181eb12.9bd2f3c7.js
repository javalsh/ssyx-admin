(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e181eb12"],{"734b":function(t,e,l){},a299:function(t,e,l){"use strict";l("734b")},b7c5:function(t,e,l){"use strict";l("99af");var a=l("b775"),i="/admin/product/skuInfo";e["a"]={getPageList:function(t,e,l){return Object(a["a"])({url:"".concat(i,"/").concat(t,"/").concat(e),method:"get",params:l})},getById:function(t){return Object(a["a"])({url:"".concat(i,"/get/").concat(t),method:"get"})},save:function(t){return Object(a["a"])({url:"".concat(i,"/save"),method:"post",data:t})},updateById:function(t){return Object(a["a"])({url:"".concat(i,"/update"),method:"put",data:t})},removeById:function(t){return Object(a["a"])({url:"".concat(i,"/remove/").concat(t),method:"delete"})},removeRows:function(t){return Object(a["a"])({url:"".concat(i,"/batchRemove"),method:"delete",data:t})},publish:function(t,e){return Object(a["a"])({url:"".concat(i,"/publish/").concat(t,"/").concat(e),method:"get"})},check:function(t,e){return Object(a["a"])({url:"".concat(i,"/check/").concat(t,"/").concat(e),method:"get"})},isNewPerson:function(t,e){return Object(a["a"])({url:"".concat(i,"/isNewPerson/").concat(t,"/").concat(e),method:"get"})}}},f31e:function(t,e,l){"use strict";l.r(e);var a=function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("div",{staticClass:"app-container"},[l("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[l("i",{staticClass:"el-icon-tickets",staticStyle:{"margin-top":"5px"}}),l("span",{staticStyle:{"margin-top":"5px"}},[t._v("数据列表")]),l("el-button",{staticClass:"btn-add",attrs:{size:"mini",disabled:!1===t.$hasBP("btn.all")},on:{click:function(e){return t.addSku()}}},[t._v("添加")]),l("el-button",{staticClass:"btn-add",staticStyle:{margin:"0 10px"},attrs:{size:"mini"},on:{click:function(e){return t.$router.back()}}},[t._v("返回")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,stripe:"",border:""}},[l("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s((t.page-1)*t.limit+e.$index+1)+" ")]}}])}),l("el-table-column",{attrs:{prop:"skuInfo.skuName",label:"商品名称"}}),l("el-table-column",{attrs:{prop:"skuInfo.skuCode",label:"商品编号"}}),l("el-table-column",{attrs:{prop:"skuInfo.price",label:"商品价格"}}),l("el-table-column",{attrs:{prop:"skuInfo.stock",label:"剩余数量"}}),l("el-table-column",{attrs:{prop:"seckillPrice",label:"秒杀价格"}}),l("el-table-column",{attrs:{prop:"seckillStock",label:"秒杀数量"}}),l("el-table-column",{attrs:{prop:"seckillLimit",label:"每人限购数量"}}),l("el-table-column",{attrs:{prop:"seckillSort",label:"排序"}}),l("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),l("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[l("el-button",{attrs:{type:"text",disabled:!1===t.$hasBP("btn.all")},on:{click:function(l){return t.handleUpdate(e.row)}}},[t._v("修改")]),l("el-button",{attrs:{type:"text",disabled:!1===t.$hasBP("btn.all")},on:{click:function(l){return t.removeDataById(e.row.id)}}},[t._v("删除")])]}}])})],1),l("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,total:t.total,"page-size":t.limit,"page-sizes":[5,10,20,30,40,50,100],layout:"sizes, prev, pager, next, jumper, ->, total, slot"},on:{"current-change":t.fetchData,"size-change":t.changeSize}}),l("el-dialog",{attrs:{title:"添加商品",visible:t.selectDialogVisible,width:"40%"},on:{"update:visible":function(e){t.selectDialogVisible=e}}},[l("el-table",{attrs:{data:t.dialogData.list,border:""},on:{"selection-change":t.handleDialogSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),l("el-table-column",{attrs:{label:"商品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.skuName))]}}])}),l("el-table-column",{attrs:{label:"货号",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.skuCode))]}}])}),l("el-table-column",{attrs:{label:"价格",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("￥"+t._s(e.row.price))]}}])})],1),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.dialogData.page,"page-size":t.dialogData.limit,"page-sizes":[5,10,15],total:t.dialogData.total},on:{"size-change":t.handleDialogSizeChange,"current-change":t.handleDialogCurrentChange,"update:currentPage":function(e){return t.$set(t.dialogData,"page",e)},"update:current-page":function(e){return t.$set(t.dialogData,"page",e)}}})],1),l("div",{staticStyle:{clear:"both"}}),l("div",{attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.selectDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.handleSelectDialogConfirm()}}},[t._v("确 定")])],1)],1),l("el-dialog",{attrs:{title:"编辑秒杀商品信息",visible:t.editDialogVisible,width:"40%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[l("el-form",{ref:"flashProductRelationForm",attrs:{"label-width":"150px",size:"small"}},[l("el-form-item",{attrs:{label:"商品名称："}},[l("span",[t._v(t._s(t.seckillSku.skuInfo.skuName))])]),l("el-form-item",{attrs:{label:"sku编号："}},[l("span",[t._v(t._s(t.seckillSku.skuInfo.skuCode))])]),l("el-form-item",{attrs:{label:"sku价格："}},[l("span",[t._v("￥"+t._s(t.seckillSku.skuInfo.price))])]),l("el-form-item",{attrs:{label:"秒杀价格："}},[l("el-input",{staticClass:"input-width",model:{value:t.seckillSku.seckillPrice,callback:function(e){t.$set(t.seckillSku,"seckillPrice",e)},expression:"seckillSku.seckillPrice"}},[l("template",{slot:"prepend"},[t._v("￥")])],2)],1),l("el-form-item",{attrs:{label:"剩余数量："}},[l("span",[t._v(t._s(t.seckillSku.skuInfo.stock))])]),l("el-form-item",{attrs:{label:"秒杀数量："}},[l("el-input",{staticClass:"input-width",model:{value:t.seckillSku.seckillStock,callback:function(e){t.$set(t.seckillSku,"seckillStock",e)},expression:"seckillSku.seckillStock"}})],1),l("el-form-item",{attrs:{label:"限购数量："}},[l("el-input",{staticClass:"input-width",model:{value:t.seckillSku.seckillLimit,callback:function(e){t.$set(t.seckillSku,"seckillLimit",e)},expression:"seckillSku.seckillLimit"}})],1),l("el-form-item",{attrs:{label:"排序："}},[l("el-input",{staticClass:"input-width",model:{value:t.seckillSku.seckillSort,callback:function(e){t.$set(t.seckillSku,"seckillSort",e)},expression:"seckillSku.seckillSort"}})],1)],1),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{attrs:{size:"small"},on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.updateData()}}},[t._v("确 定")])],1)],1)],1)},i=[],s=(l("99af"),l("b775")),n="/admin/activity/seckillSku",o={getPageList:function(t,e,l){return Object(s["a"])({url:"".concat(n,"/").concat(t,"/").concat(e),method:"get",params:l})},getById:function(t){return Object(s["a"])({url:"".concat(n,"/get/").concat(t),method:"get"})},save:function(t){return Object(s["a"])({url:"".concat(n,"/save"),method:"post",data:t})},updateById:function(t){return Object(s["a"])({url:"".concat(n,"/update"),method:"put",data:t})},removeById:function(t){return Object(s["a"])({url:"".concat(n,"/remove/").concat(t),method:"delete"})},removeRows:function(t){return Object(s["a"])({url:"".concat(n,"/batchRemove"),method:"delete",data:t})}},c=l("b7c5"),r={id:"",seckillId:"",seckillTimeId:"",skuId:"",seckillPrice:"",seckillStock:"",seckillLimit:"",seckillSort:"",skuName:"",imgUrl:"",skuInfo:{skuName:"",skuCode:"",price:"",stock:""}},u={data:function(){return{seckillId:null,seckillTimeId:null,listLoading:!0,list:null,total:0,page:1,limit:10,searchObj:{},dialogVisible:!1,selectDialogVisible:!1,dialogData:{list:null,total:null,page:1,limit:5,multipleSelection:[]},editDialogVisible:!1,seckillSku:r}},created:function(){this.seckillId=this.$route.query.seckillId,this.seckillTimeId=this.$route.query.seckillTimeId,console.log("list created......"),this.fetchData()},mounted:function(){console.log("list mounted......")},methods:{fetchData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;console.log("翻页。。。"+e),this.page=e,this.searchObj.seckillId=this.seckillId,this.searchObj.seckillTimeId=this.seckillTimeId,o.getPageList(this.page,this.limit,this.searchObj).then((function(e){t.list=e.data.records,t.total=e.data.total,t.listLoading=!1}))},addSku:function(){this.selectDialogVisible=!0,this.getDialogList()},getDialogList:function(){var t=this;c["a"].getPageList(this.dialogData.page,this.dialogData.limit,[]).then((function(e){t.dialogData.list=e.data.records,t.dialogData.total=e.data.total,t.listLoading=!1}))},handleDialogSizeChange:function(t){this.dialogData.pageNum=1,this.dialogData.pageSize=t,this.getDialogList()},handleDialogCurrentChange:function(t){this.dialogData.pageNum=t,this.getDialogList()},handleDialogSelectionChange:function(t){this.dialogData.multipleSelection=t},handleSelectDialogConfirm:function(){var t=this;if(this.dialogData.multipleSelection<1)this.$message({message:"请选择一条记录",type:"warning",duration:1e3});else{for(var e=[],l=0;l<this.dialogData.multipleSelection.length;l++)e.push({skuId:this.dialogData.multipleSelection[l].id,seckillId:this.seckillId,seckillTimeId:this.seckillTimeId,skuName:this.dialogData.multipleSelection[l].skuName,imgUrl:this.dialogData.multipleSelection[l].imgUrl});this.$confirm("使用要进行添加操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.save(e).then((function(e){e.code&&(t.$message({type:"success",message:e.message}),t.selectDialogVisible=!1,t.fetchData(1))}))}))}},handleUpdate:function(t){this.editDialogVisible=!0,this.seckillSku=Object.assign({},t)},updateData:function(){var t=this;o.updateById(this.seckillSku).then((function(e){e.code&&(t.$message({type:"success",message:e.message}),t.editDialogVisible=!1,t.fetchData(1))}))},removeDataById:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){return o.removeById(t)})).then((function(t){e.fetchData(e.page),t.code&&e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},d=u,g=(l("a299"),l("2877")),m=Object(g["a"])(d,a,i,!1,null,"036d695e",null);e["default"]=m.exports}}]);